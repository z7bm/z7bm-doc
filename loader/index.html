<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Loader - Zynq-7000 Baremetal</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Loader";
        var mkdocs_page_input_path = "loader.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
 <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }</style> <script src="../assets/javascripts/glightbox.min.js"></script></head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Zynq-7000 Baremetal
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">General</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="..">Purpose</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../impl/">Implementation</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Software</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Loader</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#_2">–û–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#_3">–°—Ç–∞—Ä—Ç</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#_4">–ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#apu">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ APU</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_5">–¢–∞–±–ª–∏—Ü–∞ –≤–µ–∫—Ç–æ—Ä–æ–≤ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#scu-mmu-l1-caches">–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è SCU, MMU, L1 Caches</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#scu-invalidate-all-rregisters-in-secure-state-register">SCU Invalidate All Rregisters in Secure State Register</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#tlb">–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è TLB, –∫—ç—à–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª—è –≤–µ—Ç–≤–ª–µ–Ω–∏–π</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_6">–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞ –¥–∞–Ω–Ω—ã—Ö</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#mmu">–ó–∞–ø—Ä–µ—â–µ–Ω–∏–µ MMU</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#spsr-sp">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ SPSR –∏ SP</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#scu-mmu-l1">–í–∫–ª—é—á–µ–Ω–∏–µ SCU, MMU –∏ –∫—ç—à–µ–π L1</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#scu">–í–∫–ª—é—á–µ–Ω–∏–µ SCU</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#mmu_1">MMU</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#mmu-l1">–í–∫–ª—é—á–µ–Ω–∏–µ MMU –∏ –æ–±–æ–∏—Ö –∫—ç—à–µ–π L1:</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#auxiliary-control-register">–ò–Ω–∏—Ü–∞–ª–∏–∑–∞—Ü–∏—è Auxiliary Control Register</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_7">–¢–∞–±–ª–∏—Ü–∞ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#l2">–ö—ç—à L2</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_8">–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#cp10-cp11">–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ CP10 –∏ CP11</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#vfp">–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã VFP</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_9">–í–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª—è –≤–µ—Ç–≤–ª–µ–Ω–∏–π</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#l2_1">–ö–æ—Ä—Ä–µ–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫—ç—à–∞ L2</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#abort">–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π —Ç–∏–ø–∞ Abort</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_10">–ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ —Å–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ –≤ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#_11">–°—Ç–∞—Ä—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#ps">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–∏—Ñ–µ—Ä–∏–π–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ PS</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#_12">–û–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_13">–ü—Ä–æ—Ü–µ—Å—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#main">–§—É–Ω–∫—Ü–∏—è main</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#_17">–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../app/">Application Program</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../debug/">Debug</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Hardware</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../gic/">Interrupt Controller</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mmu/">Memory Management Unit</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Libraries</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../mmr-headers/">MMR Headers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../peripheral-lib/">Peripheral</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Target Boards</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../zed/">ZedBoard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ax7021/">AX7021</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Zynq-7000 Baremetal</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Software</li>
      <li class="breadcrumb-item active">Loader</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="_1">–ó–∞–≥—Ä—É–∑—á–∏–∫<a class="headerlink" href="#_1" title="Permanent link">üîó</a></h1>
<h2 id="_2">–û–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ<a class="headerlink" href="#_2" title="Permanent link">üîó</a></h2>
<p>–ó–∞–≥—Ä—É–∑—á–∏–∫ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞—á–∞–ª—å–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∞–ø–ø–∞—Ä–∞—Ç—É—Ä—ã SoC, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏ (—Ç–∞–±–ª–∏—Ü–∞ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ –∞–¥—Ä–µ—Å–æ–≤ <strong>MMU</strong> –∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ <strong>OCM</strong>) –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—Ä–∞–∑–∞ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏–∑ —Ñ–ª–µ—à—å –ø–∞–º—è—Ç–∏ –≤ <strong>OCM</strong> —Å –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –ø–µ—Ä–µ–¥–∞—á–µ–π –µ–π —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.</p>
<p>–ù–∞ –Ω–∞—á–∞–ª—å–Ω–æ–º —ç—Ç–∞–ø–µ –∑–∞–≥—Ä—É–∑—á–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é (<strong>SCU</strong>, <strong>MMU</strong>, –∫—ç—à–∏ <strong>L1</strong> –∏ <strong>L2</strong> —É—Ä–æ–≤–Ω–µ–π), –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Ä–µ–∂–∏–º–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (<strong>SPSR</strong> –∏ <strong>SP</strong>) –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–¥ —Å—Ç–∞—Ä—Ç–∞–ø–∞ <strong>C/C++</strong>.</p>
<p>–ó–∞—Ç–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ <code>main</code> –∑–∞–≥—Ä—É–∑—á–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç —Ä–µ–º–∞–ø —Ç–∞–±–ª–∏—Ü—ã —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ <strong>MMU</strong>, –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ <strong>OCM</strong> –∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –∑–∞–≥—Ä—É–∑–∫—É –æ–±—Ä–∞–∑–∞ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏–∑ —Ñ–ª–µ—à—å –ø–∞–º—è—Ç–∏ –≤ <strong>OCM</strong>.</p>
<p>–ù–∞—á–∞–ª—å–Ω—ã–π –∫–æ–¥ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ <strong>FSBL</strong> (First Stage Boot Loader) –¥–ª—è <strong>Zynq-7000</strong>, –∫–æ—Ç–æ—Ä—ã–π –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –≤–æ –º–Ω–æ–≥–æ–º –±–∞–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–æ–º –∫–æ–¥–µ –æ—Ç <strong>ARM</strong>. –ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–æ –∫–æ–Ω—Å–ø–µ–∫—Ç–∏–≤–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –∑–∞–≥—Ä—É–∑—á–∏–∫–∞.</p>
<h2 id="_3">–°—Ç–∞—Ä—Ç<a class="headerlink" href="#_3" title="Permanent link">üîó</a></h2>
<p>–†–∞–±–æ—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∫–æ–¥–∞, –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –≤ —Ñ–∞–π–ª–µ <code>boot.S</code>.</p>
<p>–ü–æ –Ω—É–ª–µ–≤—ã–º –∞–¥—Ä–µ—Å–∞–º —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ –≤–µ–∫—Ç–æ—Ä–æ–≤ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π (–∏—Å–∫–ª—é—á–µ–Ω–∏–π):</p>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="w">    </span><span class="nf">B</span><span class="w">   </span><span class="no">_boot</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="nf">B</span><span class="w">   </span><span class="no">Undefined</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="nf">B</span><span class="w">   </span><span class="no">SVCHandler</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="nf">B</span><span class="w">   </span><span class="no">PrefetchAbortHandler</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">    </span><span class="nf">B</span><span class="w">   </span><span class="no">DataAbortHandler</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="nf">NOP</span><span class="w"> </span><span class="cm">/* Placeholder for address exception vector*/</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="nf">B</span><span class="w">   </span><span class="no">IRQHandler</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">    </span><span class="nf">B</span><span class="w">   </span><span class="no">FIQHandler</span>
</span></code></pre></div>
<p>–°—Ç–∞—Ä—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ –≤–µ–∫—Ç–æ—Ä—É <code>_boot</code>, –≥–¥–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∫–æ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∞–ø–ø–∞—Ä–∞—Ç—É—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞</p>
<h2 id="_4">–ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è<a class="headerlink" href="#_4" title="Permanent link">üîó</a></h2>
<h3 id="apu">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ APU<a class="headerlink" href="#apu" title="Permanent link">üîó</a></h3>
<p>–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Ä—è–¥ –¥–µ–π—Å—Ç–≤–∏–π, –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —è —è–¥—Ä–∞–º–∏ SoC.</p>
<p>–ü–µ—Ä–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ <code>CPU</code>, –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞–±–æ—Ç—É –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ <code>CPU0</code>, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –≤—Å—Ç–∞—Ç—å –Ω–∞ –æ–∂–∏–¥–∞–Ω–∏–µ:</p>
<p><div class="language-asm highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="w">        </span><span class="cm">/* only allow cpu0 through */</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="nf">mrc</span><span class="w">  </span><span class="no">p15</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="no">r1</span><span class="p">,</span><span class="no">c0</span><span class="p">,</span><span class="no">c0</span><span class="p">,</span><span class="mi">5</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="nf">and</span><span class="w">  </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="mi">#0</span><span class="no">xf</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="nf">cmp</span><span class="w">  </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="mi">#0</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span><span class="nf">beq</span><span class="w">  </span><span class="no">CheckEFUSE</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="nl">EndlessLoop0:</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="nf">wfe</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="nf">b</span><span class="w">   </span><span class="no">EndlessLoop0</span>
</span></code></pre></div>
–ó–¥–µ—Å—å —Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è Affinity Register –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (—Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã–π –≤ —Å–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–µ CP15), –≤ –º–ª–∞–¥—à–∏—Ö –±–∏—Ç–∞—Ö –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–Ω–æ–º–µ—Ä) —è–¥—Ä–∞, –¥–∞–ª–µ–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –ø–æ–ª—è, –µ—Å–ª–∏ –æ–Ω–æ –Ω–µ –Ω–æ–ª—å, —Ç–æ —è–¥—Ä–æ –ø–∞—Ä–∫—É–µ—Ç—Å—è  –≤ <code>wfe</code>.</p>
<p>–î–∞–ª–µ–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —Å–∫–æ–ª—å–∫–æ —è–¥–µ—Ä —É <code>APU</code>, –µ—Å–ª–∏ –æ–¥–Ω–æ, —Ç–æ –≤—Ç–æ—Ä–æ–µ —è–¥—Ä–æ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è. –î–≤–∞ –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–∞:</p>
<ol>
<li>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —è–¥–µ—Ä —Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏–∑ –Ω–µ–∫–æ–µ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞ <code>EFUSEStatus</code>, –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–∞–π—Ç–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å. </li>
<li>–ï—Å–ª–∏ —è–¥—Ä–æ <code>CPU1</code> –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, —Ç–æ –Ω–µ —è—Å–Ω–æ, –∑–∞—á–µ–º –¥–µ—Ä–∂–∞—Ç—å –µ–≥–æ –≤ —Å–±—Ä–æ—Å–µ –∏ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∫–ª–æ–∫, –∞ –∏–º–µ–Ω–Ω–æ —ç—Ç–æ –≤ –∫–æ–¥–µ –∏ –¥–µ–ª–∞–µ—Ç—Å—è (<code>orr r1, r1, #0x22</code> - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏—Ç–æ–≤ —Å–±—Ä–æ—Å–∞ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∞ –∫–ª–æ–∫–∞ –¥–ª—è <code>CPU1</code>):</li>
</ol>
<p><div class="language-asm highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="err">=</span><span class="no">SLCRCPURSTReg</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r1</span><span class="p">,[</span><span class="no">r0</span><span class="p">]</span><span class="w">                             </span><span class="cm">/* Read CPU Software Reset Control register */</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="nf">orr</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="no">r1</span><span class="p">,</span><span class="mi">#0</span><span class="no">x22</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span><span class="nf">str</span><span class="w"> </span><span class="no">r1</span><span class="p">,[</span><span class="no">r0</span><span class="p">]</span><span class="w">                             </span><span class="cm">/* Reset CPU1 */</span>
</span></code></pre></div>
–í–æ–∑–º–æ–∂–Ω–æ, —ç—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–º, —á—Ç–æ —Ö–æ—Ç—è —Å–∞–º–æ–≥–æ —è–¥—Ä–∞ –∏ –Ω–µ—Ç, –Ω–æ –æ–∫—Ä—É–∂–∞—é—â–∞—è –µ–≥–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞  –Ω–∏–∫—É–¥–∞ –Ω–µ –¥–µ–ª–∞—Å—å (–æ–Ω–∞ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –æ–±—â–µ–π —Å–∏—Å—Ç–µ–º—ã), –∏ —á—Ç–æ–±—ã –æ–Ω–∞ –Ω–µ –ø–æ—Ç—Ä–µ–±–ª—è–ª–∞ –∏/–∏–ª–∏ –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª–∞ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–±–ª–µ–º, –µ—ë –Ω—É–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å. –≠—Ç–æ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ, –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–∏–∫–∞–∫–∏—Ö —Å–≤–µ–¥–µ–Ω–∏–π –æ–± —ç—Ç–æ–º –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å –Ω–µ —É–¥–∞–ª–æ—Å—å.</p>
<p>–ó–∞—Ç–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ —Ä–µ–≤–∏–∑–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –¥–≤–µ errata. –ß—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç—É—Ç –¥–µ–ª–∞–µ—Ç—Å—è, –Ω–µ —è—Å–Ω–æ, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –±–∏—Ç–æ–≤ –∫–∞–∫–æ–≥–æ-—Ç–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞ (–∞ –º–æ–∂–µ—Ç, –∏ –Ω–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è - –æ–ø–µ—Ä–∞—Ü–∏–∏ —É—Å–ª–æ–≤–Ω—ã–µ). –í—Å—ë —ç—Ç–æ –Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ. </p>
<h3 id="_5">–¢–∞–±–ª–∏—Ü–∞ –≤–µ–∫—Ç–æ—Ä–æ–≤ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π<a class="headerlink" href="#_5" title="Permanent link">üîó</a></h3>
<p>–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–∞–±–ª–∏—Ü—ã –≤–µ–∫—Ç–æ—Ä–æ–≤ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π:</p>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="err">=</span><span class="no">vector_base</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="nf">mcr</span><span class="w"> </span><span class="no">p15</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">c12</span><span class="p">,</span><span class="w"> </span><span class="no">c0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span></code></pre></div>
<p><code>CP15-&gt;c12</code>&nbsp;‚Äì —ç—Ç–æ —Ä–µ–≥–∏—Å—Ç—Ä <code>VBAR</code>, —Ç.–µ. –∫–∞–∫ —Ä–∞–∑ –∏ –µ—Å—Ç—å Vector Base Address Register.</p>
<h3 id="scu-mmu-l1-caches">–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è SCU, MMU, L1 Caches<a class="headerlink" href="#scu-mmu-l1-caches" title="Permanent link">üîó</a></h3>
<p>–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–µ–π, —Ç–∞–±–ª–∏—Ü—ã <strong>MMU</strong> –∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª—è –≤–µ—Ç–≤–ª–µ–Ω–∏–π. </p>
<h4 id="scu-invalidate-all-rregisters-in-secure-state-register">SCU Invalidate All Rregisters in Secure State Register<a class="headerlink" href="#scu-invalidate-all-rregisters-in-secure-state-register" title="Permanent link">üîó</a></h4>
<p>–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –∫–∞–Ω–∞–ª–æ–≤ (ways) –Ω–∞ —É—Ä–æ–≤–Ω–µ SCU.</p>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="w">    </span><span class="cm">/*invalidate scu*/</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r7</span><span class="p">,</span><span class="w"> </span><span class="err">=</span><span class="mi">0xf8f0000c</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r6</span><span class="p">,</span><span class="w"> </span><span class="err">=</span><span class="mi">0xffff</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="nf">str</span><span class="w"> </span><span class="no">r6</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">r7</span><span class="p">]</span>
</span></code></pre></div>
<h4 id="tlb">–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è TLB, –∫—ç—à–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª—è –≤–µ—Ç–≤–ª–µ–Ω–∏–π<a class="headerlink" href="#tlb" title="Permanent link">üîó</a></h4>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="w">    </span><span class="cm">/* Invalidate caches and TLBs */</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="mi">#0</span><span class="w">                       </span><span class="cm">/* r0 = 0  */</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">    </span><span class="nf">mcr</span><span class="w"> </span><span class="no">p15</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">c8</span><span class="p">,</span><span class="w"> </span><span class="no">c7</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w">       </span><span class="cm">/* invalidate TLBs */</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span><span class="nf">mcr</span><span class="w"> </span><span class="no">p15</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">c7</span><span class="p">,</span><span class="w"> </span><span class="no">c5</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w">       </span><span class="cm">/* invalidate icache */</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">    </span><span class="nf">mcr</span><span class="w"> </span><span class="no">p15</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">c7</span><span class="p">,</span><span class="w"> </span><span class="no">c5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="w">       </span><span class="cm">/* Invalidate branch predictor array */</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">    </span><span class="nf">bl</span><span class="w">  </span><span class="no">invalidate_dcache</span><span class="w">           </span><span class="cm">/* invalidate dcache */</span>
</span></code></pre></div>
<h4 id="_6">–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞ –¥–∞–Ω–Ω—ã—Ö<a class="headerlink" href="#_6" title="Permanent link">üîó</a></h4>
<p>–ü–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º–∞ <code>invalidate_dcache</code> –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é –∫—ç—à–∞ –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä Cortex-A9 –Ω–µ –∏–º–µ–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –º–æ–≥–ª–∞ –±—ã –∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å –∫—ç—à –¥–∞–Ω–Ω—ã—Ö, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –ø–æ –æ–¥–Ω–æ–π –ª–∏–Ω–∏–∏.</p>
<p>–ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —É—Ä–æ–≤–µ–Ω—å –∫—ç—à–∞:</p>
<p><div class="language-asm highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="w">   </span><span class="nf">mrc</span><span class="w">  </span><span class="no">p15</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">c0</span><span class="p">,</span><span class="w"> </span><span class="no">c0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w">   </span><span class="cm">/* read CLIDR */</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">   </span><span class="nf">ands</span><span class="w"> </span><span class="no">r3</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="mi">#0</span><span class="no">x7000000</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">   </span><span class="nf">mov</span><span class="w">  </span><span class="no">r3</span><span class="p">,</span><span class="w"> </span><span class="no">r3</span><span class="p">,</span><span class="w"> </span><span class="no">lsr</span><span class="w"> </span><span class="mi">#23</span><span class="w">         </span><span class="cm">/* cache level value (naturally aligned) */</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">   </span><span class="nf">beq</span><span class="w">  </span><span class="no">finished</span>
</span></code></pre></div>
–ó–¥–µ—Å—å –∏–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞ <code>CLIDR</code> (Cache Level ID Register) —Å–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ <code>CP15</code> —Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ, –º–∞—Å–∫–∏—Ä—É–µ—Ç—Å—è –ø–æ–ª–µ <code>LoUU</code> (Level of unification, uniprocessor, 29:27 –±–∏—Ç—ã), —Ä–µ–∑—É–ª—å—Ç–∞—Ç "–Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è" - –ø–æ–ª–µ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ –º–ª–∞–¥—à–∏–µ –±–∏—Ç—ã, –ø–æ—Å–ª–µ —á–µ–≥–æ –≤ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è —É—Ä–æ–≤–µ–Ω—å –∫—ç—à–∞ (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞–≤–Ω–æ 2).
–ï—Å–ª–∏ —É—Ä–æ–≤–µ–Ω—å –∫—ç—à–∞ 0, —Ç–æ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é —ç–ø–∏–ª–æ–≥–∞ –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º—ã.</p>
<div class="admonition tip">
<p class="admonition-title"><strong>ARMv7 Architecture Reference Manual</strong></p>
<p>LoUU, Level of unification, uniprocessor This field defines the last level of cache that must be cleaned or invalidated when cleaning or invalidating to the point of unification for the processor. As with LoC, the LoUU value is a cache level. If the LoUU field value is 0x0, this means that no levels of cache need to cleaned or invalidated when cleaning or invalidating to the point of unification. If the LoUU field value is a nonzero value that corresponds to a level that is not implemented, this indicates that all implemented caches are before the point of unification.</p>
</div>
<p>–ó–∞—Ç–µ–º, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –≤–æ–∑–≤—Ä–∞—Ç –∫ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:</p>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">r10</span><span class="p">,</span><span class="w"> </span><span class="mi">#0</span><span class="w">             </span><span class="cm">/* start with level 0 */</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="nl">loop1:</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">r2</span><span class="p">,</span><span class="w"> </span><span class="no">r10</span><span class="p">,</span><span class="w"> </span><span class="no">r10</span><span class="p">,</span><span class="w"> </span><span class="no">lsr</span><span class="w"> </span><span class="mi">#1</span><span class="w">       </span><span class="cm">/* work out 3xcachelevel */</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">lsr</span><span class="w"> </span><span class="no">r2</span><span class="w">             </span><span class="cm">/* bottom 3 bits are the Cache type for this level */</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">    </span><span class="nf">and</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="mi">#7</span><span class="w">                 </span><span class="cm">/* get those 3 bits alone */</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">    </span><span class="nf">cmp</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="mi">#2</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">    </span><span class="nf">blt</span><span class="w"> </span><span class="no">skip</span><span class="w">                       </span><span class="cm">/* no cache or only instruction cache at this level */</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">    </span><span class="nf">mcr</span><span class="w"> </span><span class="no">p15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="no">r10</span><span class="p">,</span><span class="w"> </span><span class="no">c0</span><span class="p">,</span><span class="w"> </span><span class="no">c0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w">     </span><span class="cm">/* write the Cache Size selection register */</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">    </span><span class="nf">isb</span><span class="w">                            </span><span class="cm">/* isb to sync the change to the CacheSizeID reg */</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">    </span><span class="nf">mrc</span><span class="w"> </span><span class="no">p15</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="no">c0</span><span class="p">,</span><span class="w"> </span><span class="no">c0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w">      </span><span class="cm">/* reads current Cache Size ID register */</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="w">    </span><span class="nf">and</span><span class="w"> </span><span class="no">r2</span><span class="p">,</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="mi">#7</span><span class="w">                 </span><span class="cm">/* extract the line length field */</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">r2</span><span class="p">,</span><span class="w"> </span><span class="no">r2</span><span class="p">,</span><span class="w"> </span><span class="mi">#4</span><span class="w">                 </span><span class="cm">/* add 4 for the line length offset (log2 16 bytes) */</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r4</span><span class="p">,</span><span class="w"> </span><span class="err">=</span><span class="mi">0x3ff</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="w">    </span><span class="nf">ands</span><span class="w">    </span><span class="no">r4</span><span class="p">,</span><span class="w"> </span><span class="no">r4</span><span class="p">,</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="no">lsr</span><span class="w"> </span><span class="mi">#3</span><span class="w">     </span><span class="cm">/* r4 is the max number on the way size (right aligned) */</span>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="w">    </span><span class="nf">clz</span><span class="w"> </span><span class="no">r5</span><span class="p">,</span><span class="w"> </span><span class="no">r4</span><span class="w">                     </span><span class="cm">/* r5 is the bit position of the way size increment */</span>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r7</span><span class="p">,</span><span class="w"> </span><span class="err">=</span><span class="mi">0x7fff</span>
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="w">    </span><span class="nf">ands</span><span class="w">    </span><span class="no">r7</span><span class="p">,</span><span class="w"> </span><span class="no">r7</span><span class="p">,</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="no">lsr</span><span class="w"> </span><span class="mi">#13</span><span class="w">    </span><span class="cm">/* r7 is the max number of the index size (right aligned) */</span>
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a><span class="nl">loop2:</span>
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">r9</span><span class="p">,</span><span class="w"> </span><span class="no">r4</span><span class="w">                     </span><span class="cm">/* r9 working copy of the max way size (right aligned) */</span>
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a><span class="nl">loop3:</span>
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a><span class="w">    </span><span class="nf">orr</span><span class="w"> </span><span class="no">r11</span><span class="p">,</span><span class="w"> </span><span class="no">r10</span><span class="p">,</span><span class="w"> </span><span class="no">r9</span><span class="p">,</span><span class="w"> </span><span class="no">lsl</span><span class="w"> </span><span class="no">r5</span><span class="w">       </span><span class="cm">/* factor in the way number and cache number into r11 */</span>
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a><span class="w">    </span><span class="nf">orr</span><span class="w"> </span><span class="no">r11</span><span class="p">,</span><span class="w"> </span><span class="no">r11</span><span class="p">,</span><span class="w"> </span><span class="no">r7</span><span class="p">,</span><span class="w"> </span><span class="no">lsl</span><span class="w"> </span><span class="no">r2</span><span class="w">       </span><span class="cm">/* factor in the index number */</span>
</span><span id="__span-7-23"><a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a><span class="w">    </span><span class="nf">mcr</span><span class="w"> </span><span class="no">p15</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">r11</span><span class="p">,</span><span class="w"> </span><span class="no">c7</span><span class="p">,</span><span class="w"> </span><span class="no">c6</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w">     </span><span class="cm">/* invalidate by set/way */</span>
</span><span id="__span-7-24"><a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a><span class="w">    </span><span class="nf">subs</span><span class="w">    </span><span class="no">r9</span><span class="p">,</span><span class="w"> </span><span class="no">r9</span><span class="p">,</span><span class="w"> </span><span class="mi">#1</span><span class="w">             </span><span class="cm">/* decrement the way number */</span>
</span><span id="__span-7-25"><a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a><span class="w">    </span><span class="nf">bge</span><span class="w"> </span><span class="no">loop3</span><span class="w">   </span>
</span><span id="__span-7-26"><a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a><span class="w">    </span><span class="no">subs</span><span class="w">    </span><span class="no">r7</span><span class="p">,</span><span class="w"> </span><span class="no">r7</span><span class="p">,</span><span class="w"> </span><span class="mi">#1</span><span class="w">             </span><span class="cm">/* decrement the index */</span>
</span><span id="__span-7-27"><a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a><span class="w">    </span><span class="nf">bge</span><span class="w"> </span><span class="no">loop2</span><span class="w">   </span>
</span><span id="__span-7-28"><a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a><span class="no">skip</span><span class="p">:</span><span class="w">   </span>
</span><span id="__span-7-29"><a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a><span class="w">    </span><span class="no">add</span><span class="w"> </span><span class="no">r10</span><span class="p">,</span><span class="w"> </span><span class="no">r10</span><span class="p">,</span><span class="w"> </span><span class="mi">#2</span><span class="w">               </span><span class="cm">/* increment the cache number */</span>
</span><span id="__span-7-30"><a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a><span class="w">    </span><span class="nf">cmp</span><span class="w"> </span><span class="no">r3</span><span class="p">,</span><span class="w"> </span><span class="no">r10</span><span class="w">   </span>
</span><span id="__span-7-31"><a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a><span class="w">    </span><span class="no">bgt</span><span class="w"> </span><span class="no">loop1</span>
</span><span id="__span-7-32"><a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a>
</span><span id="__span-7-33"><a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a><span class="nl">finished:</span>
</span><span id="__span-7-34"><a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">r10</span><span class="p">,</span><span class="w"> </span><span class="mi">#0</span><span class="w">                    </span><span class="cm">/* swith back to cache level 0 */</span>
</span><span id="__span-7-35"><a id="__codelineno-7-35" name="__codelineno-7-35" href="#__codelineno-7-35"></a><span class="w">    </span><span class="nf">mcr</span><span class="w"> </span><span class="no">p15</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="no">r10</span><span class="p">,</span><span class="w"> </span><span class="no">c0</span><span class="p">,</span><span class="w"> </span><span class="no">c0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w">     </span><span class="cm">/* select current cache level in cssr */</span>
</span><span id="__span-7-36"><a id="__codelineno-7-36" name="__codelineno-7-36" href="#__codelineno-7-36"></a><span class="w">    </span><span class="nf">dsb</span>
</span><span id="__span-7-37"><a id="__codelineno-7-37" name="__codelineno-7-37" href="#__codelineno-7-37"></a><span class="w">    </span><span class="nf">isb</span>
</span><span id="__span-7-38"><a id="__codelineno-7-38" name="__codelineno-7-38" href="#__codelineno-7-38"></a>
</span><span id="__span-7-39"><a id="__codelineno-7-39" name="__codelineno-7-39" href="#__codelineno-7-39"></a><span class="w">    </span><span class="nf">bx</span><span class="w">  </span><span class="no">lr</span>
</span></code></pre></div>
<p>–≠—Ç–æ—Ç –∫–æ–¥ –≤—ã—á–∏—Å–ª—è–µ—Ç —É—Ä–æ–≤–µ–Ω—å –∫—ç—à–∞ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –≤ —Ü–∏–∫–ª–µ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é –∫—ç—à–∞ –ø–æ —Å—Ö–µ–º–µ "way-line", —Ç.–µ. –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–π —Ü–∏–∫–ª (–ø–µ—Ä–≤—ã–π —É—Ä–æ–≤–µ–Ω—å - –ø—Ä–æ—Ö–æ–¥ –ø–æ ways, –≤—Ç–æ—Ä–æ–π - –ø—Ä–æ—Ö–æ–¥ –ø–æ –ª–∏–Ω–∏—è–º). –î–ª—è L1 –∫—ç—à–∞ —ç—Ç–æ 4 —Ü–∏–∫–ª–∞ –ø–æ way –∏ 256 —Ü–∏–∫–ª–æ–≤ –ø–æ –ª–∏–Ω–∏—è–º.</p>
<p>–§—Ä–∞–≥–º–µ–Ω—Ç —Å <code>loop1</code> –¥–æ <code>loop2</code> - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–≤–µ–¥–µ–Ω–∏–π –æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∫—ç—à–µ–π, –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫—ç—à–∞ —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è (—Å–∫–æ–ª—å–∫–æ way, —Å–∫–æ–ª—å–∫–æ –ª–∏–Ω–∏–π –∏ —Ç.–¥.). –§—Ä–∞–≥–º–µ–Ω—Ç —Å <code>loop2</code> –¥–æ <code>skip</code> –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é. –í–Ω–µ—à–Ω–∏–π —Ü–∏–∫–ª (<code>loop2</code>-<code>skip</code>) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç ways –∫—ç—à–∞, –≤–ª–æ–∂–µ–Ω–Ω—ã–π —Ü–∏–∫–ª (<code>loop3</code>-<code>bge loop3</code>) –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –ª–∏–Ω–∏–∏ –∫—ç—à–∞.</p>
<p>–ö–æ–¥ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–∞ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é –æ–±–æ–∏—Ö —É—Ä–æ–≤–Ω–µ–π (L1 –∏ L2), –Ω–æ —Ä–µ–∞–ª—å–Ω–æ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ L1 –∫—ç—à, L2 –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω - –≤–∏–¥–∏–º–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ –æ–Ω (L2  –∫—ç—à) –µ—â—ë –Ω–µ —Ä–∞–∑—Ä–µ—à—ë–Ω.</p>
<p>–í –∫–æ–Ω—Ü–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–µ–≥–æ —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –∫—ç—à–∞, –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —É—Ä–æ–≤–Ω—é L1 (—ç—Ç–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∞ –∫—ç—à–∏ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π).</p>
<h3 id="mmu">–ó–∞–ø—Ä–µ—â–µ–Ω–∏–µ MMU<a class="headerlink" href="#mmu" title="Permanent link">üîó</a></h3>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="w">    </span><span class="cm">/* Disable MMU, if enabled */</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">    </span><span class="nf">mrc</span><span class="w"> </span><span class="no">p15</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">c1</span><span class="p">,</span><span class="w"> </span><span class="no">c0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w">      </span><span class="cm">/* read CP15 register 1 */</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">    </span><span class="nf">bic</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="mi">#0</span><span class="no">x1</span><span class="w">               </span><span class="cm">/* clear bit 0 */</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">    </span><span class="nf">mcr</span><span class="w"> </span><span class="no">p15</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">c1</span><span class="p">,</span><span class="w"> </span><span class="no">c0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w">      </span><span class="cm">/* write value back */</span>
</span></code></pre></div>
<p>–•–æ—Ç—è <strong>MMU</strong> –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –∏ —Ç–∞–∫ –∑–∞–ø—Ä–µ—â–µ–Ω–æ. –ó–∞–ø—Ä–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —á–µ—Ä–µ–∑ —Å–±—Ä–æ—Å –±–∏—Ç–∞ <code>M</code> –≤ —Ä–µ–≥–∏—Å—Ç—Ä–µ <code>SCTLR</code>, –±–∏—Ç —ç—Ç–æ—Ç –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –æ—Ç ARM: <code>MPU</code> enable bit. –í <code>Cortex-A</code> –Ω–µ—Ç <code>MPU</code>, –∞ –≤–º–µ—Å—Ç–æ –Ω–µ–≥–æ <strong>MMU</strong>. –ò–º–µ–µ—Ç—Å—è –ª–∏ –≤ –≤–∏–¥—É, —á—Ç–æ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç—Å—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –Ω–µ —è—Å–Ω–æ. –ü–æ –∫–æ–¥—É –≤–∏–¥–∏–º–æ —Ç–∞–∫.</p>
<h3 id="spsr-sp">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ SPSR –∏ SP<a class="headerlink" href="#spsr-sp" title="Permanent link">üîó</a></h3>
<p>–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ <code>SPSR</code> –∏ <code>SP</code> –¥–ª—è —Ä–µ–∂–∏–º–æ–≤ <code>IRQ</code>, <code>SVC</code>, <code>Abort</code>, <code>FIQ</code>, <code>Undefined</code>, <code>System (User)</code>. –ö–æ–¥ –ø–æ —Å—É—Ç–∏ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ, –º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–µ–∂–∏–º (–ø—É—Ç—ë–º —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–∏—Ç–æ–≤–æ–≥–æ –ø–æ–ª—è <code>M</code> –≤ <code>CPSR</code>). –ö–æ–¥ –¥–ª—è <code>IRQ</code>:</p>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="w">    </span><span class="nf">mrs</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">cpsr</span><span class="w">               </span><span class="cm">/* get the current PSR */</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">    </span><span class="nf">mvn</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="mi">#0</span><span class="no">x1f</span><span class="w">              </span><span class="cm">/* set up the irq stack pointer */</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">    </span><span class="nf">and</span><span class="w"> </span><span class="no">r2</span><span class="p">,</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">    </span><span class="nf">orr</span><span class="w"> </span><span class="no">r2</span><span class="p">,</span><span class="w"> </span><span class="no">r2</span><span class="p">,</span><span class="w"> </span><span class="mi">#0</span><span class="no">x12</span><span class="w">          </span><span class="cm">/* IRQ mode */</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">    </span><span class="nf">msr</span><span class="w"> </span><span class="no">cpsr</span><span class="p">,</span><span class="w"> </span><span class="no">r2</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r13</span><span class="p">,</span><span class="err">=</span><span class="no">IRQ_stack</span><span class="w">         </span><span class="cm">/* IRQ stack pointer */</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">    </span><span class="nf">bic</span><span class="w"> </span><span class="no">r2</span><span class="p">,</span><span class="w"> </span><span class="no">r2</span><span class="p">,</span><span class="w"> </span><span class="c1">#(0x1 &lt;&lt; 9)    /* Set EE bit to little-endian */</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">    </span><span class="nf">msr</span><span class="w"> </span><span class="no">spsr_fsxc</span><span class="p">,</span><span class="no">r2</span>
</span></code></pre></div>
<p>–ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ <code>orr r2, r2, #0x12</code> –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–∂–∏–º, —Å–ª–µ–¥—É—é—â–∞—è –∑–∞ –Ω–µ–π <code>msr cpsr, r2</code> –º–µ–Ω—è–µ—Ç —Ä–µ–∂–∏–º. 
<code>ldr r13,=IRQ_stack</code> –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —É–∫–∞–∑–∞—Ç–µ–ª—è —Å—Ç–µ–∫–∞ –≤ <code>SP</code>, –∞ <code>msr spsr_fsxc,r2</code> –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç—É—Å–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä —ç—Ç–æ–≥–æ —Ä–µ–∂–∏–º–∞.</p>
<p>–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤, –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –≤—ã—à–µ, —Ç–æ—á–Ω–æ —Ç–∞–∫–∞—è –∂–µ, –º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Ä–µ–∂–∏–º–æ–≤ –∏ –∞–¥—Ä–µ—Å–∞ —Å—Ç–µ–∫–æ–≤.</p>
<h3 id="scu-mmu-l1">–í–∫–ª—é—á–µ–Ω–∏–µ SCU, MMU –∏ –∫—ç—à–µ–π L1<a class="headerlink" href="#scu-mmu-l1" title="Permanent link">üîó</a></h3>
<p>–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–∂–∏–º–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –≤–∫–ª—é—á–µ–Ω–∏–µ <code>SCU</code>, <strong>MMU</strong> –∏ –∫—ç—à–µ–π –ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è.</p>
<h4 id="scu">–í–∫–ª—é—á–µ–Ω–∏–µ SCU<a class="headerlink" href="#scu" title="Permanent link">üîó</a></h4>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="w">    </span><span class="cm">/*set scu enable bit in scu*/</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r7</span><span class="p">,</span><span class="w"> </span><span class="err">=</span><span class="mi">0xf8f00000</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">r7</span><span class="p">]</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">    </span><span class="nf">orr</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="mi">#0</span><span class="no">x1</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">    </span><span class="nf">str</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">r7</span><span class="p">]</span>
</span></code></pre></div>
<p>–ó–¥–µ—Å—å –≤—Å—ë –ø—Ä–æ—Å—Ç–æ: <code>0xf8f00000</code> - —ç—Ç–æ –∞–¥—Ä–µ—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞ <code>SCU_CONTROL_REGISTER</code> –∏–∑ –≥—Ä—É–ø–ø—ã <code>mpcore</code>, –º–ª–∞–¥—à–∏–π –±–∏—Ç —ç—Ç–æ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞ <code>SCU_enable</code>. –í—ã—à–µ–ø—Ä–∏–≤–µ–¥—ë–Ω–Ω—ã–π –∫–æ–¥ –ø—Ä–æ—Å—Ç–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —ç—Ç–æ—Ç –±–∏—Ç, —Ä–∞–∑—Ä–µ—à–∞—è —Ç–µ–º —Å–∞–º—ã–º —Ä–∞–±–æ—Ç—É <code>SCU</code>.</p>
<h4 id="mmu_1">MMU<a class="headerlink" href="#mmu_1" title="Permanent link">üîó</a></h4>
<p>–ó–∞—Ç–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞ <code>TTBR0</code> –∏–∑ –≥—Ä—É–ø–ø—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è <strong>MMU</strong>:</p>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="err">=</span><span class="no">TblBase</span><span class="w">         </span><span class="cm">/* Load MMU translation table base */</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">    </span><span class="nf">orr</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="mi">#0</span><span class="no">x5B</span><span class="w">           </span><span class="cm">/* Outer-cacheable, WB */</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">    </span><span class="nf">mcr</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">c2</span><span class="p">,</span><span class="w"> </span><span class="no">c0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w">        </span><span class="cm">/* TTB0 */</span>
</span></code></pre></div>
<p>–ó–¥–µ—Å—å —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –∑–∞–≥—Ä—É–∑–∫–æ–π –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ —Ä–µ–≥–∏—Å—Ç—Ä. –§–æ—Ä–º–∞—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞:</p>
<table>
<thead>
<tr>
<th>31:x</th>
<th>x-1:7</th>
<th>6</th>
<th>5</th>
<th>4:3</th>
<th>2</th>
<th>1</th>
<th>0</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>TTB</code> Addr</td>
<td>Reserved</td>
<td><code>IRGN[0]</code></td>
<td><code>NOS</code></td>
<td><code>RGN</code></td>
<td><code>IMP</code></td>
<td><code>S</code></td>
<td><code>IRGN[1]</code></td>
</tr>
</tbody>
</table>
<p><code>TTB</code> (Translation Table Base) Address –∑–∞–Ω–∏–º–∞–µ—Ç –±–∏—Ç—ã <code>31:x</code>, –≥–¥–µ <code>x = 14 - TTBCR.N</code>, –∞ <code>TTBCR.N</code> —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:</p>
<div class="admonition tip">
<p class="admonition-title">TTBCR.N</p>
<p><code>N, bits[2:0]</code> Indicate the width of the base address held in <code>TTBR0</code>. In <code>TTBR0</code>, the base address field is bits<code>[31:14-N]</code>. The value of <code>N</code> also determines: </p>
<ul>
<li>whether <code>TTBR0</code> or <code>TTBR1</code> is used as the base address for translation table walks. </li>
<li>the size of the translation table pointed to by <code>TTBR0</code>. </li>
</ul>
<p>N can take any value from <code>0</code> to <code>7</code>, that is, from <code>0b000</code> to <code>0b111</code>. When <code>N</code> has its reset value of <code>0</code>, the translation table base is compatible with <strong>ARMv5</strong> and <strong>ARMv6</strong>.</p>
</div>
<p>–ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é <code>TTBCR.N</code> —Ä–∞–≤–Ω–æ <code>0</code>, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç <code>x = 14</code>, —Ç.–µ. –º–ª–∞–¥—à–∏–µ 14 —Ä–∞–∑—Ä—è–¥–æ–≤ –ø–æ–¥ –±–∏—Ç—ã –∞–¥—Ä–µ—Å–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏ –ø—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∞–¥—Ä–µ—Å–∞ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—é—Ç—Å—è —Ä–∞–≤–Ω—ã–º–∏ 0 (—Å–∞–º–∞ —Ç–∞–±–ª–∏—Ü–∞ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤—ã—Ä–æ–≤–Ω–µ–Ω–∞ –Ω–∞ –≥—Ä–∞–Ω–∏—Ü—É —Å–≤–æ–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞, —Ç.–µ. –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ —Ä–∞–∑–º–µ—Ä —Ç–∞–±–ª–∏—Ü—ã 16–∫ –∏ –µ—ë —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤—ã—Ä–æ–≤–Ω–µ–Ω–æ –Ω–∞ –≥—Ä–∞–Ω–∏—Ü—É 16–∫. –≠—Ç–æ –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–ª–∞–¥—à–∏–µ –±–∏—Ç—ã –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤ <strong>MMU</strong>.</p>
<p>–û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞ <code>TTBR</code>:</p>
<div class="admonition tip">
<p class="admonition-title">TTBR</p>
<p><code>NOS, bit[5]</code></p>
<p>Not Outer Shareable bit. Indicates the Outer Shareable attribute for the memory associated with a translation table walk that has the Shareable attribute, indicated by <code>TTBR0.S == 1</code>: </p>
<ul>
<li><code>0</code> Outer Shareable </li>
<li><code>1</code> Inner Shareable. </li>
</ul>
<p>This bit is ignored when <code>TTBR0.S == 0</code>. ARMv7 introduces this bit. If an implementation does not distinguish between Inner Shareable and Outer Shareable, this bit is <code>UNK/SBZP</code>.</p>
<p><code>RGN, bits[4:3]</code></p>
<p>Region bits. Indicates the Outer cacheability attributes for the memory associated with the translation table walks: </p>
<ul>
<li><code>0b00</code> Normal memory, Outer Non-cacheable. </li>
<li><code>0b01</code> Normal memory, Outer Write-Back Write-Allocate Cacheable. </li>
<li><code>0b10</code> Normal memory, Outer Write-Through Cacheable. </li>
<li><code>0b11</code> Normal memory, Outer Write-Back no Write-Allocate Cacheable.</li>
</ul>
<p><code>IMP, bit[2]</code></p>
<p>The effect of this bit is IMPLEMENTATION DEFINED. If the translation table implementation does not include any IMPLEMENTATION DEFINED features this bit is <code>UNK/SBZP</code>.</p>
<p><code>S, bit[1]</code></p>
<p>Shareable bit. Indicates the Shareable attribute for the memory associated with the translation table walks: </p>
<ul>
<li><code>0</code> Non-shareable </li>
<li><code>1</code> Shareable.</li>
</ul>
<p><code>IRGN, bits[6, 0]</code>, in an implementation that includes the Multiprocessing Extensions </p>
<p>Inner region bits. Indicates the Inner Cacheability attributes for the memory associated with the translation table walks. The possible values of IRGN[1:0] are: </p>
<ul>
<li><code>0b00</code> Normal memory, Inner Non-cacheable. </li>
<li><code>0b01</code> Normal memory, Inner Write-Back Write-Allocate Cacheable. </li>
<li><code>0b10</code> Normal memory, Inner Write-Through Cacheable. </li>
<li><code>0b11</code> Normal memory, Inner Write-Back no Write-Allocate Cacheable.</li>
</ul>
</div>
<p>–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –∑–Ω–∞—á–µ–Ω–∏–µ <code>0x5B</code> == 0<code>b01011011</code> —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è–º –ø–æ–ª–µ–π:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>IRGN</code></td>
<td><code>0b11</code></td>
<td>Normal memory, Inner Write-Back no Write-Allocate Cacheable.</td>
</tr>
<tr>
<td><code>S</code></td>
<td><code>1</code></td>
<td>Shareable</td>
</tr>
<tr>
<td><code>IMP</code></td>
<td><code>0</code></td>
<td>MMU not include any IMPLEMENTATION DEFINED features</td>
</tr>
<tr>
<td><code>RGN</code></td>
<td><code>0b11</code></td>
<td>Normal memory, Outer Write-Back no Write-Allocate Cacheable.</td>
</tr>
<tr>
<td><code>NOS</code></td>
<td><code>0</code></td>
<td>Outer Shareable</td>
</tr>
</tbody>
</table>
<p>–ó–∞—Ç–µ–º –∏–¥—ë—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ <code>MMU domain</code>:</p>
<p><div class="language-asm highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="w">    </span><span class="nf">mvn</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="mi">#0</span><span class="w">               </span><span class="cm">/* Load MMU domains -- all ones=manager */</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">    </span><span class="nf">mcr</span><span class="w"> </span><span class="no">p15</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="no">r0</span><span class="p">,</span><span class="no">c3</span><span class="p">,</span><span class="no">c0</span><span class="p">,</span><span class="mi">0</span>
</span></code></pre></div>
–î–µ–π—Å—Ç–≤–∏–µ –ø–æ–Ω—è—Ç–Ω–æ –∏–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è.</p>
<h4 id="mmu-l1">–í–∫–ª—é—á–µ–Ω–∏–µ MMU –∏ –æ–±–æ–∏—Ö –∫—ç—à–µ–π L1:<a class="headerlink" href="#mmu-l1" title="Permanent link">üîó</a></h4>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="w">    </span><span class="cm">/* Enable mmu, icahce and dcache */</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="err">=</span><span class="no">CRValMmuCac</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">    </span><span class="nf">mcr</span><span class="w"> </span><span class="no">p15</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="no">r0</span><span class="p">,</span><span class="no">c1</span><span class="p">,</span><span class="no">c0</span><span class="p">,</span><span class="mi">0</span><span class="w">        </span><span class="cm">/* Enable cache and MMU */</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">    </span><span class="nf">dsb</span><span class="w">                         </span><span class="cm">/* dsb  allow the MMU to start up */</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">    </span><span class="nf">isb</span><span class="w">                         </span><span class="cm">/* isb  flush prefetch buffer */</span>
</span></code></pre></div>
<p>–ó–¥–µ—Å—å –≤ <code>SCTRL</code> (—ç—Ç–æ <code>CP15 c1, c0</code>) –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ <code>0x1005</code>, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–µ –±–∏—Ç–æ–≤ <code>I</code> (–∫—ç—à –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π), <code>C</code> (–∫—ç—à –¥–∞–Ω–Ω—ã—Ö –∏ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫—ç—à) –∏ <code>M</code> (<strong>MMU</strong>). –°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:</p>
<div class="admonition tip">
<p class="admonition-title"><strong>In ARMv7</strong></p>
<ul>
<li>
<p><strong>SCTLR.C</strong> enables or disables all data and unified caches for data accesses, across all levels of cache visible to the processor. It is IMPLEMENTATION DEFINED whether it also enables or disables the use of unified caches for instruction accesses.</p>
</li>
<li>
<p><strong>SCTLR.I</strong> enables or disables all instruction caches, across all levels of cache visible to the processor.</p>
</li>
</ul>
</div>
<p>–¢.–µ. –±–∏—Ç—ã –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è –∫—ç—à–µ–π —Ä–∞–±–æ—Ç–∞—é—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ "—Å–∫–≤–æ–∑—å" –≤—Å–µ —É—Ä–æ–≤–Ω–∏ –∫—ç—à–µ–π.</p>
<h4 id="auxiliary-control-register">–ò–Ω–∏—Ü–∞–ª–∏–∑–∞—Ü–∏—è Auxiliary Control Register<a class="headerlink" href="#auxiliary-control-register" title="Permanent link">üîó</a></h4>
<div class="admonition tip">
<p class="admonition-title"><strong>ARMv7-A</strong></p>
<p>The ACTLR provides IMPLEMENTATION DEFINED configuration and control options.</p>
</div>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="w">    </span><span class="cm">/* Write to ACTLR */</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">    </span><span class="nf">mrc</span><span class="w"> </span><span class="no">p15</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">c1</span><span class="p">,</span><span class="w"> </span><span class="no">c0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w">       </span><span class="cm">/* Read ACTLR*/</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">    </span><span class="nf">orr</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="c1">#(0x01 &lt;&lt; 6)        /* set SMP bit */</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">    </span><span class="nf">orr</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="c1">#(0x01 )            /* Cache/TLB maintenance broadcast */</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">    </span><span class="nf">mcr</span><span class="w"> </span><span class="no">p15</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">c1</span><span class="p">,</span><span class="w"> </span><span class="no">c0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w">       </span><span class="cm">/* Write ACTLR*/</span>
</span></code></pre></div>
<p>–≠—Ç–æ—Ç –∫–æ–¥ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤ —Ä–µ–≥–∏—Å—Ç—Ä–µ <code>ACTRL</code> Cortex-A9 –±–∏—Ç—ã <code>SMP</code> –∏ <code>FW</code>.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SMP</code></td>
<td>Signals if the Cortex-A9 processor is taking part in coherency or not. In uniprocessor configurations, if this bit is set,<br> then Inner Cacheable Shared is treated as Cacheable. The reset value is zero.</td>
</tr>
<tr>
<td><code>FW</code></td>
<td>Cache and TLB maintenance broadcast:<ul><li>0 Disabled. This is the reset value.</li><li>1 Enabled.</li></ul> <code>RAZ/WI</code> if only one Cortex-A9 processor is present.</td>
</tr>
</tbody>
</table>
<h4 id="_7">–¢–∞–±–ª–∏—Ü–∞ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏<a class="headerlink" href="#_7" title="Permanent link">üîó</a></h4>
<p><strong>MMU</strong> –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é <a href="../mmu/">—Ç–∞–±–ª–∏—Ü—É —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ –∞–¥—Ä–µ—Å–æ–≤</a> (–æ–ø–∏—Å–∞–Ω–∞ –≤ <code>translation_table.S</code>)<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>.</p>
<h3 id="l2">–ö—ç—à L2<a class="headerlink" href="#l2" title="Permanent link">üîó</a></h3>
<p>–ö—ç—à <code>L2</code> –Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ —è–¥—Ä–æ, –∏ –ø–æ—ç—Ç–æ–º—É —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–µ —á–µ—Ä–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä—ã —Å–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ <code>CP15</code>, –∞ —á–µ—Ä–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä—ã, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–µ –Ω–∞ –∞–¥—Ä–µ—Å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –ø–∞–º—è—Ç–∏ (memory-mapped registers - MMRs).</p>
<p>–í—ã–ø–æ–ª–Ω—è–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:</p>
<p><div class="language-asm highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="err">=</span><span class="no">L2CCCrtl</span><span class="w">        </span><span class="cm">/* Load L2CC base address base + control register */</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="mi">#0</span><span class="w">              </span><span class="cm">/* force the disable bit */</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">    </span><span class="nf">str</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">r0</span><span class="p">]</span><span class="w">            </span><span class="cm">/* disable the L2 Caches */</span>
</span></code></pre></div>
–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –∑–∞–≥—Ä—É–∑–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è 0 –≤ –±–∏—Ç 'l2_enable<code>—Ä–µ–≥–∏—Å—Ç—Ä–∞</code>reg1_control`, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∑–∞–ø—Ä–µ—â–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã L2 –∫—ç—à–∞.</p>
<p>–î–∞–ª–µ–µ:
<div class="language-asm highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="w">   </span><span class="nf">ldr</span><span class="w">  </span><span class="no">r0</span><span class="p">,</span><span class="err">=</span><span class="no">L2CCAuxCrtl</span><span class="w">     </span><span class="cm">/* Load L2CC base address base + Aux control register */</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">   </span><span class="nf">ldr</span><span class="w">  </span><span class="no">r1</span><span class="p">,[</span><span class="no">r0</span><span class="p">]</span><span class="w">             </span><span class="cm">/* read the register */</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="w">   </span><span class="nf">ldr</span><span class="w">  </span><span class="no">r2</span><span class="p">,</span><span class="err">=</span><span class="no">L2CCAuxControl</span><span class="w">  </span><span class="cm">/* set the default bits */</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">   </span><span class="nf">orr</span><span class="w">  </span><span class="no">r1</span><span class="p">,</span><span class="no">r1</span><span class="p">,</span><span class="no">r2</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">   </span><span class="nf">str</span><span class="w">  </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">r0</span><span class="p">]</span><span class="w">            </span><span class="cm">/* store the Aux Control Register */</span>
</span></code></pre></div>
–°—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞ <code>reg1_aux_control</code>, –æ–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: <code>0x02060000</code>. –í –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ —ç—Ç–æ–º—É —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –µ—â—ë –±–∏—Ç—ã <code>0x72360000</code>, —á—Ç–æ –¥–∞—ë—Ç –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Ç–æ –∂–µ —Å–∞–º–æ–µ <code>0x72360000</code>:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th style="text-align: right;">Bit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>way_size</td>
<td style="text-align: right;">19:17</td>
<td>Way-size, <code>0x3</code> = <code>64KB</code></td>
</tr>
<tr>
<td>event_mon_bus_en</td>
<td style="text-align: right;">20</td>
<td>Event monitor bus enable, <code>1</code> = Enabled</td>
</tr>
<tr>
<td>parity_en</td>
<td style="text-align: right;">21</td>
<td>Parity enable, <code>1</code> = Enabled</td>
</tr>
<tr>
<td>data_prefetch_en</td>
<td style="text-align: right;">28</td>
<td>Data prefetch enable, <code>1</code> = Enabled</td>
</tr>
<tr>
<td>instr_prefetch_en</td>
<td style="text-align: right;">29</td>
<td>Instruction prefetch enable, <code>1</code> = Enabled</td>
</tr>
<tr>
<td>early_bresp_en</td>
<td style="text-align: right;">30</td>
<td>Early BRESP enable, <code>1</code> = Enabled</td>
</tr>
</tbody>
</table>
<p>–ó–∞—Ç–µ–º –≤ —Ä–µ–≥–∏—Å—Ç—Ä <code>reg1_tag_ram_control</code> –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ <code>0x00000111</code>:
<div class="language-asm highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="w">   </span><span class="nf">ldr</span><span class="w">  </span><span class="no">r0</span><span class="p">,</span><span class="err">=</span><span class="no">L2CCTAGLatReg</span><span class="w">       </span><span class="cm">/* Load L2CC base address base + TAG Latency address */</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="w">   </span><span class="nf">ldr</span><span class="w">  </span><span class="no">r1</span><span class="p">,</span><span class="err">=</span><span class="no">L2CCTAGLatency</span><span class="w">      </span><span class="cm">/* set the latencies for the TAG*/</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">   </span><span class="nf">str</span><span class="w">  </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">r0</span><span class="p">]</span><span class="w">                </span><span class="cm">/* store the TAG Latency register Register */</span>
</span></code></pre></div>
—á—Ç–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª–µ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞:
<div class="language-text highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>ram_setup_lat     = 0x1
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>ram_rd_access_lat = 0x1
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>ram_wr_access_lat = 0x1
</span></code></pre></div>
–ó–Ω–∞—á–µ–Ω–∏–µ <code>0x1</code> –¥–ª—è –ª—é–±–æ–≥–æ –∏–∑ —ç—Ç–∏—Ö –ø–æ–ª–µ–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç <code>2 cycles latency</code>.</p>
<p>–î–∞–ª–µ–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –≤ —Ä–µ–≥–∏—Å—Ç—Ä <code>reg1_data_ram_control</code>:
<div class="language-asm highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="w">   </span><span class="nf">ldr</span><span class="w">  </span><span class="no">r0</span><span class="p">,</span><span class="err">=</span><span class="no">L2CCDataLatReg</span><span class="w">      </span><span class="cm">/* Load L2CC base address base + Data Latency address */</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="w">   </span><span class="nf">ldr</span><span class="w">  </span><span class="no">r1</span><span class="p">,</span><span class="err">=</span><span class="no">L2CCDataLatency</span><span class="w">     </span><span class="cm">/* set the latencies for the Data*/</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="w">   </span><span class="nf">str</span><span class="w">  </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">r0</span><span class="p">]</span><span class="w">                </span><span class="cm">/* store the Data Latency register Register */</span>
</span></code></pre></div>
—Ç–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è <code>0x00000121</code>, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç:
<div class="language-text highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>ram_setup_lat     = 0x1 (2 cycles latency)
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>ram_rd_access_lat = 0x2 (3 cycles latency)
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>ram_wr_access_lat = 0x1 (2 cycles latency)
</span></code></pre></div></p>
<p>–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä <code>reg7_inv_way</code> –∑–Ω–∞—á–µ–Ω–∏–µ–º <code>0x0000ffff</code>, —á—Ç–æ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É—Ç –≤—Å–µ –∫–∞–Ω–∞–ª—ã (ways) –∫—ç—à–∞:
<div class="language-asm highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="w">   </span><span class="nf">ldr</span><span class="w">  </span><span class="no">r0</span><span class="p">,</span><span class="err">=</span><span class="no">L2CCWay</span><span class="w">         </span><span class="cm">/* Load L2CC base address base + way register*/</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="w">   </span><span class="nf">ldr</span><span class="w">  </span><span class="no">r2</span><span class="p">,</span><span class="w"> </span><span class="err">=</span><span class="mi">0xFFFF</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="w">   </span><span class="nf">str</span><span class="w">  </span><span class="no">r2</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">r0</span><span class="p">]</span><span class="w">            </span><span class="cm">/* force invalidate */</span>
</span></code></pre></div>
–¢—É—Ç –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è—Ç–Ω–æ: –≤ —ç—Ç–æ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ –∑–Ω–∞—á–∏–º—ã–µ –±–∏—Ç—ã —Ç–æ–ª—å–∫–æ <code>7:0</code>, –∫–∞–∂–¥—ã–π –±–∏—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ–π –∫–∞–Ω–∞–ª, –∞ –ø–æ—Å–∫–æ–ª—å–∫—É L2 –∫—ç—à —è–≤–ª—è–µ—Ç—Å—è 8-–∫–∞–Ω–∞–ª—å–Ω—ã–º, —Ç–æ –∏ –±–∏—Ç–æ–≤, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∫–∞–Ω–∞–ª–∞–º, —Ç–æ–∂–µ 8. –¢.–µ. –∑–∞–≥—Ä—É–∂–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å <code>0x000000ff</code>. –°—Ç–∞—Ä—à–∏–µ –±–∏—Ç—ã <code>31:8</code> –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –æ–±–æ–∑–Ω–∞—á–µ–Ω—ã –∫–∞–∫ <code>reserved</code>. –ü–æ—Ö–æ–∂–µ –Ω–∞ –±–∞–≥.</p>
<p>–ü–æ—Å–ª–µ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Ü–∏–∫–ª –æ–∂–∏–¥–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—á–µ–º—É-—Ç–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π. –ü–æ —Ñ–∞–∫—Ç—É —Ü–∏–∫–ª–µ —á–∏—Ç–∞–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞ <code>reg7_cache_sync</code>, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∑–Ω–∞—á–∏–º—ã–π –±–∏—Ç <code>c</code>:</p>
<div class="admonition tip">
<p class="admonition-title"><strong>Cache Sync</strong></p>
<p><strong>c</strong>: Cache Sync: Drain the STB. Operation complete when all buffers, <code>LRB</code>, <code>LFB</code>, <code>STB</code> and <code>EB</code>, are empty.</p>
</div>
<p>–ö–æ–¥ –æ–ø—Ä–æ—Å–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞:
<div class="language-asm highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="w">   </span><span class="nf">ldr</span><span class="w">  </span><span class="no">r0</span><span class="p">,</span><span class="err">=</span><span class="no">L2CCSync</span><span class="w">            </span><span class="cm">/* need to poll 0x730, PSS_L2CC_CACHE_SYNC_OFFSET */</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">                                </span><span class="cm">/* Load L2CC base address base + sync register*/</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">   </span><span class="cm">/* poll for completion */</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="nl">Sync:</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="w">   </span><span class="nf">ldr</span><span class="w">  </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">r0</span><span class="p">]</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">   </span><span class="nf">cmp</span><span class="w">  </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="mi">#0</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="w">   </span><span class="nf">bne</span><span class="w">  </span><span class="no">Sync</span>
</span></code></pre></div></p>
<p>–î–∞–ª–µ–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Å–±—Ä–æ—Å –±–∏—Ç–æ–≤ (—Ñ–ª–∞–≥–æ–≤) –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π:
<div class="language-asm highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="err">=</span><span class="no">L2CCIntRaw</span><span class="w">          </span><span class="cm">/* clear pending interrupts */</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r1</span><span class="p">,[</span><span class="no">r0</span><span class="p">]</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="err">=</span><span class="no">L2CCIntClear</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="w">    </span><span class="nf">str</span><span class="w"> </span><span class="no">r1</span><span class="p">,[</span><span class="no">r0</span><span class="p">]</span>
</span></code></pre></div>
–¢—É—Ç —á–∏—Ç–∞–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–Ω–æ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π –∏ –∑–∞—Ç–µ–º –æ–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ä–µ–≥–∏—Å—Ç—Ä —Å–±—Ä–æ—Å–∞ —Ñ–ª–∞–≥–æ–≤ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π&nbsp;‚Äì —Å–±—Ä–æ—Å —Ñ–ª–∞–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø—É—Ç—ë–º –∑–∞–ø–∏—Å–∏ <code>1</code>, —Ç.–µ. –µ—Å–ª–∏ –∫–∞–∫–æ–π-–ª–∏–±–æ —Ñ–ª–∞–≥ –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –æ–Ω –±—É–¥–µ—Ç —Å–±—Ä–æ—à–µ–Ω.</p>
<p>–ó–∞–≤–µ—Ä—à–∞—é—â–∞—è —Ü–µ–ø–æ—á–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π:</p>
<p><div class="language-asm highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="err">=</span><span class="no">SLCRUnlockReg</span><span class="w">       </span><span class="cm">/* Load SLCR base address base + unlock register */</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="err">=</span><span class="no">SLCRUnlockKey</span><span class="w">       </span><span class="cm">/* set unlock key */</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="w">    </span><span class="nf">str</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">r0</span><span class="p">]</span><span class="w">                </span><span class="cm">/* Unlock SLCR */</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="err">=</span><span class="no">SLCRL2cRamReg</span><span class="w">       </span><span class="cm">/* Load SLCR base address base + l2c Ram Control register */</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="err">=</span><span class="no">SLCRL2cRamConfig</span><span class="w">    </span><span class="cm">/* set the configuration value */</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="w">    </span><span class="nf">str</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">r0</span><span class="p">]</span><span class="w">                </span><span class="cm">/* store the L2c Ram Control Register */</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="err">=</span><span class="no">SLCRlockReg</span><span class="w">         </span><span class="cm">/* Load SLCR base address base + lock register */</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="err">=</span><span class="no">SLCRlockKey</span><span class="w">         </span><span class="cm">/* set lock key */</span>
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a><span class="w">    </span><span class="nf">str</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">r0</span><span class="p">]</span><span class="w">                </span><span class="cm">/* lock SLCR */</span>
</span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a>
</span><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="err">=</span><span class="no">L2CCCrtl</span><span class="w">            </span><span class="cm">/* Load L2CC base address base + control register */</span>
</span><span id="__span-24-14"><a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="w">    </span><span class="nf">ldr</span><span class="w"> </span><span class="no">r1</span><span class="p">,[</span><span class="no">r0</span><span class="p">]</span><span class="w">                 </span><span class="cm">/* read the register */</span>
</span><span id="__span-24-15"><a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">r2</span><span class="p">,</span><span class="w"> </span><span class="c1">#L2CCControl        /* set the enable bit */</span>
</span><span id="__span-24-16"><a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a><span class="w">    </span><span class="nf">orr</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="no">r1</span><span class="p">,</span><span class="no">r2</span>
</span><span id="__span-24-17"><a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a><span class="w">    </span><span class="nf">str</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">r0</span><span class="p">]</span><span class="w">                </span><span class="cm">/* enable the L2 Caches */</span>
</span></code></pre></div>
–ó–¥–µ—Å—å –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ –∑–∞–ø–∏—Å–∏ –≤ —Ä–µ–≥–∏—Å—Ç—Ä—ã –≥—Ä—É–ø–ø—ã <code>SCLR</code>, –∑–∞–ø–∏—Å—å "–º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ" –∑–Ω–∞—á–µ–Ω–∏—è <code>0x0020202</code> (—Ç–∞–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏) –≤ —Ä–µ–≥–∏—Å—Ç—Ä –ø–æ –∞–¥—Ä–µ—Å—É <code>0xf000a1c</code> —Å–æ —Å—Ç—Ä–∞–Ω–Ω—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º <code>reserved</code> –∏ –ø–æ—Å–ª–µ–¥—É—é—â–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞. –ü–æ—Å–ª–µ–¥–Ω–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ - —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã L2 –∫—ç—à–∞.</p>
<h3 id="_8">–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏<a class="headerlink" href="#_8" title="Permanent link">üîó</a></h3>
<h4 id="cp10-cp11">–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ CP10 –∏ CP11<a class="headerlink" href="#cp10-cp11" title="Permanent link">üîó</a></h4>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="w">    </span><span class="nf">mrc</span><span class="w"> </span><span class="no">p15</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="no">c1</span><span class="p">,</span><span class="w"> </span><span class="no">c0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w">       </span><span class="cm">/* read cp access control register (CACR) into r1 */</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="w">    </span><span class="nf">orr</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="c1">#(0xf &lt;&lt; 20)        /* enable full access for p10 &amp; p11 */</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="w">    </span><span class="nf">mcr</span><span class="w"> </span><span class="no">p15</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="no">c1</span><span class="p">,</span><span class="w"> </span><span class="no">c0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w">       </span><span class="cm">/* write back into CACR */</span>
</span></code></pre></div>
<h4 id="vfp">–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã VFP<a class="headerlink" href="#vfp" title="Permanent link">üîó</a></h4>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="w">    </span><span class="cm">/* enable vfp */</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="w">    </span><span class="nf">fmrx</span><span class="w">    </span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="no">FPEXC</span><span class="w">           </span><span class="cm">/* read the exception register */</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">    </span><span class="nf">orr</span><span class="w"> </span><span class="no">r1</span><span class="p">,</span><span class="no">r1</span><span class="p">,</span><span class="w"> </span><span class="c1">#FPEXC_EN        /* set VFP enable bit, leave the others in orig state */</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="w">    </span><span class="nf">fmxr</span><span class="w">    </span><span class="no">FPEXC</span><span class="p">,</span><span class="w"> </span><span class="no">r1</span><span class="w">           </span><span class="cm">/* write back the exception register */</span>
</span></code></pre></div>
<h4 id="_9">–í–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª—è –≤–µ—Ç–≤–ª–µ–Ω–∏–π<a class="headerlink" href="#_9" title="Permanent link">üîó</a></h4>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="w">    </span><span class="nf">mrc</span><span class="w"> </span><span class="no">p15</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="no">r0</span><span class="p">,</span><span class="no">c1</span><span class="p">,</span><span class="no">c0</span><span class="p">,</span><span class="mi">0</span><span class="w">        </span><span class="cm">/* flow prediction enable */</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="w">    </span><span class="nf">orr</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="c1">#(0x01 &lt;&lt; 11)   /* #0x8000 */</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="w">    </span><span class="nf">mcr</span><span class="w"> </span><span class="no">p15</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="no">r0</span><span class="p">,</span><span class="no">c1</span><span class="p">,</span><span class="no">c0</span><span class="p">,</span><span class="mi">0</span>
</span></code></pre></div>
<h4 id="l2_1">–ö–æ—Ä—Ä–µ–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫—ç—à–∞ L2<a class="headerlink" href="#l2_1" title="Permanent link">üîó</a></h4>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="w">    </span><span class="nf">mrc</span><span class="w"> </span><span class="no">p15</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="no">r0</span><span class="p">,</span><span class="no">c1</span><span class="p">,</span><span class="no">c0</span><span class="p">,</span><span class="mi">1</span><span class="w">        </span><span class="cm">/* read Auxiliary Control Register */</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="w">    </span><span class="nf">orr</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="c1">#(0x1 &lt;&lt; 2)     /* enable Dside prefetch */</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="w">    </span><span class="nf">orr</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="c1">#(0x1 &lt;&lt; 1)     /* enable L2 Prefetch hint */</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="w">    </span><span class="nf">mcr</span><span class="w"> </span><span class="no">p15</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="no">r0</span><span class="p">,</span><span class="no">c1</span><span class="p">,</span><span class="no">c0</span><span class="p">,</span><span class="mi">1</span><span class="w">        </span><span class="cm">/* write Auxiliary Control Register */</span>
</span></code></pre></div>
<h4 id="abort">–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π —Ç–∏–ø–∞ Abort<a class="headerlink" href="#abort" title="Permanent link">üîó</a></h4>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="w">    </span><span class="nf">mrs</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">cpsr</span><span class="w">                </span><span class="cm">/* get the current PSR */</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="w">    </span><span class="nf">bic</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span><span class="p">,</span><span class="w"> </span><span class="mi">#0</span><span class="no">x100</span><span class="w">          </span><span class="cm">/* enable asynchronous abort exception */</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="w">    </span><span class="nf">msr</span><span class="w"> </span><span class="no">cpsr_xsf</span><span class="p">,</span><span class="w"> </span><span class="no">r0</span>
</span></code></pre></div>
<h4 id="_10">–ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ —Å–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ –≤ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ<a class="headerlink" href="#_10" title="Permanent link">üîó</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>   // Clear cp15 regs with unknown reset values
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>    mov r0, #0x0
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>    mcr p15, 0, r0, c5, c0, 0         //  DFSR
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>    mcr p15, 0, r0, c5, c0, 1         //  IFSR
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>    mcr p15, 0, r0, c6, c0, 0         //  DFAR
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>    mcr p15, 0, r0, c6, c0, 2         //  IFAR
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>    mcr p15, 0, r0, c9, c13, 2        //  PMXEVCNTR
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>    mcr p15, 0, r0, c13, c0, 2        //  TPIDRURW
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>    mcr p15, 0, r0, c13, c0, 3        //  TPIDRURO
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a>
</span><span id="__span-30-11"><a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>    // Reset and start Cycle Counter
</span><span id="__span-30-12"><a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a>    mov r2, #0x80000000               //  clear overflow */
</span><span id="__span-30-13"><a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a>    mcr p15, 0, r2, c9, c12, 3        //
</span><span id="__span-30-14"><a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a>    mov r2, #0xd                      //  D, C, E */
</span><span id="__span-30-15"><a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a>    mcr p15, 0, r2, c9, c12, 0        //
</span><span id="__span-30-16"><a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a>    mov r2, #0x80000000               //  enable cycle counter */
</span><span id="__span-30-17"><a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a>    mcr p15, 0, r2, c9, c12, 1        //
</span></code></pre></div>
<p>–î–µ–π—Å—Ç–≤–∏—è –≤ –ø–µ—Ä–≤–æ–π —á–∞—Å—Ç–∏ –ø–æ–Ω—è—Ç–Ω—ã –∏–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –í–æ –≤—Ç–æ—Ä–æ–π —á–∞—Å—Ç–∏:</p>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>Register</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>mcr   p15, 0, r2, c9, c12, 3</code></td>
<td><code>PMOVSR</code></td>
<td>Overflow Flag Status Register. –ó–∞–ø–∏—Å—å <code>0x80000000</code><br>—Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –±–∏—Ç <code>C</code>, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è —Ñ–ª–∞–≥–æ–º<br>–ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è —Å—á—ë—Ç—á–∏–∫–∞ —Ü–∏–∫–ª–æ–≤ (Cycle Counter)</td>
</tr>
<tr>
<td><code>mcr   p15, 0, r2, c9, c12, 0</code></td>
<td><code>PMCR</code></td>
<td>Performance Monitor Control Register. –ó–∞–ø–∏—Å—å <code>0xd</code> –æ–∑–Ω–∞—á–∞–µ—Ç:<ul><li><code>E</code>: All counters enabled</li><li><code>C</code>: Cycle counter reset</li><li><code>D</code>: Cycle counter clock divider, <code>1</code> = <code>PMCCNTR</code> counts once<br>every 64 cycles, <code>0</code> = <code>PMCCNTR</code> counts every clock cycle</li></ul></td>
</tr>
<tr>
<td><code>mcr   p15, 0, r2, c9, c12, 1</code></td>
<td><code>PMCNTENSET</code></td>
<td>Performance Monitors Count Enable Set register.<br>–ó–∞–ø–∏—Å—å –∑–Ω–∞—á–µ–Ω–∏—è <code>0x80000000</code> —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –±–∏—Ç <code>C</code>,<br>–∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç <code>PMCCONTR</code> cycle counter.</td>
</tr>
</tbody>
</table>
<h2 id="_11">–°—Ç–∞—Ä—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã<a class="headerlink" href="#_11" title="Permanent link">üîó</a></h2>
<p>–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º–µ <code>_start</code> (–∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª <code>startup.c</code>), –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞–ø–∞ –ª—é–±–æ–π <code>C/C++</code> –ø—Ä–æ–≥—Ä–∞–º–º—ã:</p>
<ul>
<li>—Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö);</li>
<li>–¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é (–≤—ã–∑–æ–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤).</li>
</ul>
<p>–ù–æ –ø–µ—Ä–µ–¥ —ç—Ç–∏–º –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–∏—Ñ–µ—Ä–∏–π–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø—É—Ç—ë–º –≤—ã–∑–æ–≤–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–∞–∫–µ—Ç–æ–º <strong>Vivado</strong> —Ñ—É–Ω–∫—Ü–∏–µ–π <code>ps7_init()</code>.</p>
<p>–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ—Å—Ç–æ–π –∏ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π:</p>
<div class="language-cpp highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">_start</span><span class="p">()</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="p">{</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">__low_level_init</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="w">        </span><span class="n">ps7_init</span><span class="p">();</span><span class="w">                                                                   </span><span class="c1">//</span>
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a><span class="w">        </span><span class="n">memset</span><span class="p">(</span><span class="n">__bss_start</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">__bss_end</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">__bss_start</span><span class="p">);</span><span class="w">                              </span><span class="c1">// zero-fill uninitialized variables</span>
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="w">        </span><span class="n">memset</span><span class="p">(</span><span class="n">__ddr_code_start</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">__ddr_code_end</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">__ddr_code_start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">32</span><span class="p">);</span><span class="w">          </span><span class="c1">// copy initialized variables</span>
</span><span id="__span-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a><span class="w">        </span><span class="n">memcpy</span><span class="p">(</span><span class="n">__ddr_code_start</span><span class="p">,</span><span class="w"> </span><span class="n">__ddr_src_start</span><span class="p">,</span><span class="w"> </span><span class="n">__ddr_code_end</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">__ddr_code_start</span><span class="p">);</span><span class="w"> </span><span class="c1">// copy initialized variables</span>
</span><span id="__span-31-9"><a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a><span class="w">        </span><span class="n">Xil_DCacheFlush</span><span class="p">();</span>
</span><span id="__span-31-10"><a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a><span class="w">        </span><span class="n">__libc_init_array</span><span class="p">();</span><span class="w">                                                          </span><span class="c1">// low-level init &amp; ctor loop</span>
</span><span id="__span-31-11"><a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-31-12"><a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a><span class="w">    </span><span class="n">main</span><span class="p">();</span>
</span><span id="__span-31-13"><a id="__codelineno-31-13" name="__codelineno-31-13" href="#__codelineno-31-13"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="ps">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–∏—Ñ–µ—Ä–∏–π–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ PS<a class="headerlink" href="#ps" title="Permanent link">üîó</a></h3>
<h4 id="_12">–û–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è<a class="headerlink" href="#_12" title="Permanent link">üîó</a></h4>
<p>–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–∏—Ñ–µ—Ä–∏–π–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ: –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ <strong>Vivado</strong> –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç —Ñ–∞–π–ª—ã, –∫–æ–¥ –∫–æ—Ç–æ—Ä—ã—Ö –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤—Å–µ–π –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏:</p>
<table>
<thead>
<tr>
<th>File</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ps7_init.h</code></td>
<td>–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–∞–∫—Ä–æ—Å–æ–≤ –∏ –ø—Ä–æ—Ç–æ—Ç–∏–ø–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π</td>
</tr>
<tr>
<td><code>ps7_init.c</code></td>
<td>–ö–æ–¥ –∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏</td>
</tr>
<tr>
<td><code>ps7_init.tcl</code></td>
<td>–ö–æ–¥ –¥–ª—è IDE –¥–ª—è —ç–º—É–ª—è—Ü–∏–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑—á–∏–∫–æ–º, <br>–Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</td>
</tr>
</tbody>
</table>
<h4 id="_13">–ü—Ä–æ—Ü–µ—Å—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏<a class="headerlink" href="#_13" title="Permanent link">üîó</a></h4>
<h5 id="_14">–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ<a class="headerlink" href="#_14" title="Permanent link">üîó</a></h5>
<p>–ü—Ä–æ—Ü–µ—Å—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø—É—Ç—ë–º –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏ <code>ps7_init()</code>. –§—É–Ω–∫—Ü–∏—è —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —á–∞—Å—Ç–µ–π:</p>
<ol>
<li>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö.</li>
<li>–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è.</li>
</ol>
<p>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å–≤–æ–¥–∏—Ç—Å—è –∫ –≤—ã–±–æ—Ä—É –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ä–µ–≤–∏–∑–∏–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π —Ü–µ–ª–µ–≤–æ–π –º–∏–∫—Ä–æ—Å—Ö–µ–º—ã SoC –Ω–∞–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, —ç—Ç–æ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø—É—Ç—ë–º –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π —É–∫–∞–∑–∞—Ç–µ–ª—è–º –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö.</p>
<p>–°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—É—Ç—ë–º –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–≥–∏—Å—Ç—Ä—ã –ø–µ—Ä–∏—Ñ–µ—Ä–∏–π–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤. –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –Ω–µ–∫–∏–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–º. –°–∞–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ "–∑–∞–ø–∏—Å–∞–Ω—ã" –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö –¥–∞–Ω–Ω—ã—Ö. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—É—é –ø—Ä–æ—Å—Ç–æ—Ç—É —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å, —Ö–æ—Ç—è –∏ –¥–∞—ë—Ç –∑–∞–º–µ—Ç–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –∫–∞–∫ –ø–æ —Ä–∞–∑–º–µ—Ä—É –¥–∞–Ω–Ω—ã—Ö, —Ç–∞–∫ –∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.</p>
<h5 id="_15">–°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö<a class="headerlink" href="#_15" title="Permanent link">üîó</a></h5>
<p>–í —Ñ–∞–π–ª–µ <code>ps7_init.h</code> –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –º–∞–∫—Ä–æ—Å—ã:</p>
<div class="language-C highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="cp">#define OPCODE_EXIT       0U</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="cp">#define OPCODE_CLEAR      1U</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="cp">#define OPCODE_WRITE      2U</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="cp">#define OPCODE_MASKWRITE  3U</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="cp">#define OPCODE_MASKPOLL   4U</span>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="cp">#define OPCODE_MASKDELAY  5U</span>
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a><span class="cp">#define EMIT_EXIT()                   ( (OPCODE_EXIT      &lt;&lt; 4 ) | 0 )</span>
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a><span class="cp">#define EMIT_CLEAR(addr)              ( (OPCODE_CLEAR     &lt;&lt; 4 ) | 1 ) , addr</span>
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a><span class="cp">#define EMIT_WRITE(addr,val)          ( (OPCODE_WRITE     &lt;&lt; 4 ) | 2 ) , addr, val</span>
</span><span id="__span-32-11"><a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a><span class="cp">#define EMIT_MASKWRITE(addr,mask,val) ( (OPCODE_MASKWRITE &lt;&lt; 4 ) | 3 ) , addr, mask, val</span>
</span><span id="__span-32-12"><a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a><span class="cp">#define EMIT_MASKPOLL(addr,mask)      ( (OPCODE_MASKPOLL  &lt;&lt; 4 ) | 2 ) , addr, mask</span>
</span><span id="__span-32-13"><a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a><span class="cp">#define EMIT_MASKDELAY(addr,mask)     ( (OPCODE_MASKDELAY &lt;&lt; 4 ) | 2 ) , addr, mask</span>
</span></code></pre></div>
<p>–û–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö. –°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ, —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –º–∞—Å—Å–∏–≤—ã, —Å–æ—Å—Ç–æ—è—â–∏–µ –∏–∑ —Ü–µ–ø–æ—á–µ–∫ —Å–ª–æ–≤, –æ–±—Ä–∞–∑—É—é—â–∏—Ö "–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏" –Ω–µ–∫–æ–µ–≥–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞. –î–ª–∏–Ω–∞ —Ü–µ–ø–æ—á–µ–∫-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –≤–∞—Ä—å–∏—Ä—É–µ—Ç—Å—è –æ—Ç 1 –¥–æ 4. –ü–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ –≤—Å–µ–≥–¥–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –æ–ø–∫–æ–¥–∞ (—Å—Ç–∞—Ä—à–∏–π –Ω–∏–±–ª –º–ª–∞–¥—à–µ–≥–æ –±–∞–π—Ç–∞) –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ (–º–ª–∞–¥—à–∏–π –Ω–∏–±–ª –º–ª–∞–¥—à–µ–≥–æ –±–∞–π—Ç–∞). –ò–∑ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–∞–∫—Ä–æ—Å–æ–≤ –≤–∏–¥–Ω–æ, —á—Ç–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è <code>EXIT</code> –∏–º–µ–µ—Ç –¥–ª–∏–Ω—É –≤ –æ–¥–Ω–æ —Å–ª–æ–≤–æ, <code>CLEAR</code> - 2 —Å–ª–æ–≤–∞, <code>MASKWRITE</code> - 4 —Å–ª–æ–≤–∞, –æ—Å—Ç–∞–ª—å–Ω—ã–µ - –ø–æ 3 —Å–ª–æ–≤–∞.</p>
<p>–í—Å–µ –º–∞—Å—Å–∏–≤—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –æ–¥–∏–Ω–∞–∫–æ–≤–æ - —Å–º. –ø—Ä–∏–º–µ—Ä (—Ñ—Ä–∞–≥–º–µ–Ω—Ç (–Ω–∞—á–∞–ª–æ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏–µ) –º–∞—Å—Å–∏–≤–∞ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –§–ê–ü–ß):
<div class="language-C highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">ps7_pll_init_data_3_0</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="w">    </span><span class="c1">// START: top</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="w">    </span><span class="c1">// .. START: SLCR SETTINGS</span>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="w">    </span><span class="c1">// .. UNLOCK_KEY = 0XDF0D</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="w">    </span><span class="c1">// .. ==&gt; 0XF8000008[15:0] = 0x0000DF0DU</span>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="w">    </span><span class="c1">// ..     ==&gt; MASK : 0x0000FFFFU    VAL : 0x0000DF0DU</span>
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="w">    </span><span class="c1">// .. </span>
</span><span id="__span-33-8"><a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a><span class="w">    </span><span class="n">EMIT_MASKWRITE</span><span class="p">(</span><span class="mh">0XF8000008</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0000FFFFU</span><span class="w"> </span><span class="p">,</span><span class="mh">0x0000DF0DU</span><span class="p">),</span>
</span><span id="__span-33-9"><a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a><span class="w">    </span><span class="c1">// .. FINISH: SLCR SETTINGS</span>
</span><span id="__span-33-10"><a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a><span class="w">    </span><span class="c1">// .. START: PLL SLCR REGISTERS</span>
</span><span id="__span-33-11"><a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a><span class="w">    </span><span class="c1">// .. .. START: ARM PLL INIT</span>
</span><span id="__span-33-12"><a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a><span class="w">    </span><span class="c1">// .. .. PLL_RES = 0x4</span>
</span><span id="__span-33-13"><a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a><span class="w">    </span><span class="c1">// .. .. ==&gt; 0XF8000110[7:4] = 0x00000004U</span>
</span><span id="__span-33-14"><a id="__codelineno-33-14" name="__codelineno-33-14" href="#__codelineno-33-14"></a><span class="w">    </span><span class="c1">// .. ..     ==&gt; MASK : 0x000000F0U    VAL : 0x00000040U</span>
</span><span id="__span-33-15"><a id="__codelineno-33-15" name="__codelineno-33-15" href="#__codelineno-33-15"></a><span class="w">    </span><span class="c1">// .. .. PLL_CP = 0x2</span>
</span><span id="__span-33-16"><a id="__codelineno-33-16" name="__codelineno-33-16" href="#__codelineno-33-16"></a><span class="w">    </span><span class="c1">// .. .. ==&gt; 0XF8000110[11:8] = 0x00000002U</span>
</span><span id="__span-33-17"><a id="__codelineno-33-17" name="__codelineno-33-17" href="#__codelineno-33-17"></a><span class="w">    </span><span class="c1">// .. ..     ==&gt; MASK : 0x00000F00U    VAL : 0x00000200U</span>
</span><span id="__span-33-18"><a id="__codelineno-33-18" name="__codelineno-33-18" href="#__codelineno-33-18"></a><span class="w">    </span><span class="c1">// .. .. LOCK_CNT = 0xfa</span>
</span><span id="__span-33-19"><a id="__codelineno-33-19" name="__codelineno-33-19" href="#__codelineno-33-19"></a><span class="w">    </span><span class="c1">// .. .. ==&gt; 0XF8000110[21:12] = 0x000000FAU</span>
</span><span id="__span-33-20"><a id="__codelineno-33-20" name="__codelineno-33-20" href="#__codelineno-33-20"></a><span class="w">    </span><span class="c1">// .. ..     ==&gt; MASK : 0x003FF000U    VAL : 0x000FA000U</span>
</span><span id="__span-33-21"><a id="__codelineno-33-21" name="__codelineno-33-21" href="#__codelineno-33-21"></a><span class="w">    </span><span class="c1">// .. .. </span>
</span><span id="__span-33-22"><a id="__codelineno-33-22" name="__codelineno-33-22" href="#__codelineno-33-22"></a><span class="w">    </span><span class="n">EMIT_MASKWRITE</span><span class="p">(</span><span class="mh">0XF8000110</span><span class="p">,</span><span class="w"> </span><span class="mh">0x003FFFF0U</span><span class="w"> </span><span class="p">,</span><span class="mh">0x000FA240U</span><span class="p">),</span>
</span><span id="__span-33-23"><a id="__codelineno-33-23" name="__codelineno-33-23" href="#__codelineno-33-23"></a><span class="w">    </span><span class="p">...</span>
</span><span id="__span-33-24"><a id="__codelineno-33-24" name="__codelineno-33-24" href="#__codelineno-33-24"></a><span class="w">    </span><span class="p">...</span>
</span><span id="__span-33-25"><a id="__codelineno-33-25" name="__codelineno-33-25" href="#__codelineno-33-25"></a><span class="w">    </span><span class="p">...</span>
</span><span id="__span-33-26"><a id="__codelineno-33-26" name="__codelineno-33-26" href="#__codelineno-33-26"></a><span class="w">    </span><span class="p">...</span>
</span><span id="__span-33-27"><a id="__codelineno-33-27" name="__codelineno-33-27" href="#__codelineno-33-27"></a><span class="w">    </span><span class="c1">//</span>
</span><span id="__span-33-28"><a id="__codelineno-33-28" name="__codelineno-33-28" href="#__codelineno-33-28"></a><span class="w">    </span><span class="n">EMIT_EXIT</span><span class="p">(),</span>
</span><span id="__span-33-29"><a id="__codelineno-33-29" name="__codelineno-33-29" href="#__codelineno-33-29"></a><span class="p">};</span>
</span></code></pre></div>
–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º–∞–∫—Ä–æ—Å <code>EMIT_MASKWRITE(0XF8000008, 0x0000FFFFU ,0x0000DF0DU)</code> –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–ª–æ–≤:</p>
<ol>
<li><code>0x00000033</code>: –æ–ø–∫–æ–¥ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤</li>
<li><code>0xf8000008</code>: –∞–¥—Ä–µ—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞</li>
<li><code>0x0000ffff</code>: –º–∞—Å–∫–∞, –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ–º–∞—è –Ω–∞ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º–æ–µ –≤ —Ä–µ–≥–∏—Å—Ç—Ä —Å–ª–æ–≤–æ –¥–∞–Ω–Ω—ã—Ö</li>
<li><code>0x0000df0d</code>: —Å–ª–æ–≤–æ –¥–∞–Ω–Ω—ã—Ö</li>
</ol>
<p>–ü—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ —ç—Ç–æ–π "–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏" –ø—Ä–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º –∞–¥—Ä–µ—Å—É –±—É–¥–µ—Ç –∑–∞–ø–∏—Å–∞–Ω–æ —á–∏—Å–ª–æ <code>0xdf0d</code> –≤ –º–ª–∞–¥—à–∏–µ 16 –±–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞, —Å—Ç–∞—Ä—à–∏–µ 16 –±–∏—Ç –æ—Å—Ç–∞–Ω—É—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, —ç—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –º–∞—Å–∫–∏ - –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ –±–∏—Ç—ã, –≤ –ø–æ–∑–∏—Ü–∏–∏ –∫–æ—Ç–æ—Ä—ã—Ö –≤ –∑–Ω–∞—á–µ–Ω–∏–∏ –º–∞—Å–∫–∏ —Å—Ç–æ—è—Ç 1. –í –¥–∞–Ω–Ω–æ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Å–ª—É—á–∞–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ —Ä–µ–≥–∏—Å—Ç—Ä <code>SCLR_UNLOCK</code> —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø –ø–æ –∑–∞–ø–∏—Å–∏ –∫ –≥—Ä—É–ø–ø–µ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ <code>sclr</code>.</p>
<p>–û—Å—Ç–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ. –î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –ø–æ—è—Å–Ω—è–µ—Ç—Å—è, –∫–∞–∫–∏–µ –±–∏—Ç—ã, —Ñ–ª–∞–≥–∏, –ø–æ–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç—Å—è.</p>
<p>–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ <code>ps7_init.c</code> –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–æ–ª—å—à–æ–π (–±–æ–ª–µ–µ –ø–æ–ª—É–º–µ–≥–∞–±–∞–π—Ç–∞), –Ω–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ –≤ —ç—Ç–æ–º –Ω–∏—á–µ–≥–æ –Ω–µ—Ç - –ª—å–≤–∏–Ω—É—é –¥–æ–ª—é —ç—Ç–æ–≥–æ –æ–±—ä—ë–º–∞ –∑–∞–Ω–∏–º–∞—é—Ç—Å—è –º–∞—Å—Å–∏–≤—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –Ω–∏–º, –∞ —Ç–∞–∫–∏—Ö –º–∞—Å—Å–∏–≤–æ–≤ —Ç–∞–º –ø–æ–ª—Ç–æ—Ä–∞ –¥–µ—Å—è—Ç–∫–∞: —Ç—Ä–∏ —Ä–µ–≤–∏–∑–∏–∏, –¥–ª—è –∫–∞–∂–¥–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è  MIO, PLL, Clock, DDR, Peripherals.</p>
<h5 id="_16">–ó–∞–≥—Ä—É–∑–∫–∞<a class="headerlink" href="#_16" title="Permanent link">üîó</a></h5>
<p>–í–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–≤–æ–¥–∏—Ç—Å—è –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –∏–∑ –º–∞—Å—Å–∏–≤–æ–≤:
<div class="language-C highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="kt">int</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="nf">ps7_init</span><span class="p">()</span><span class="w"> </span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="p">{</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="w">  </span><span class="c1">// Get the PS_VERSION on run time</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="w">  </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">si_ver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ps7GetSiliconVersion</span><span class="w"> </span><span class="p">();</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a><span class="w">  </span><span class="c1">// –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –Ω–∞ –º–∞—Å—Å–∏–≤—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π</span>
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a><span class="w">  </span><span class="c1">// –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ä–µ–≤–∏–∑–∏–µ–π –∫—Ä–∏—Å—Ç–∞–ª–ª–∞</span>
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a><span class="w">  </span><span class="c1">// ...  </span>
</span><span id="__span-34-11"><a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a><span class="w">  </span><span class="c1">// ...  </span>
</span><span id="__span-34-12"><a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a><span class="w">  </span><span class="c1">// ...  </span>
</span><span id="__span-34-13"><a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a>
</span><span id="__span-34-14"><a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a><span class="w">  </span><span class="c1">// MIO init</span>
</span><span id="__span-34-15"><a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a><span class="w">  </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ps7_config</span><span class="w"> </span><span class="p">(</span><span class="n">ps7_mio_init_data</span><span class="p">);</span><span class="w">  </span>
</span><span id="__span-34-16"><a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">PS7_INIT_SUCCESS</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
</span><span id="__span-34-17"><a id="__codelineno-34-17" name="__codelineno-34-17" href="#__codelineno-34-17"></a>
</span><span id="__span-34-18"><a id="__codelineno-34-18" name="__codelineno-34-18" href="#__codelineno-34-18"></a><span class="w">  </span><span class="c1">// PLL init</span>
</span><span id="__span-34-19"><a id="__codelineno-34-19" name="__codelineno-34-19" href="#__codelineno-34-19"></a><span class="w">  </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ps7_config</span><span class="w"> </span><span class="p">(</span><span class="n">ps7_pll_init_data</span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-34-20"><a id="__codelineno-34-20" name="__codelineno-34-20" href="#__codelineno-34-20"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">PS7_INIT_SUCCESS</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
</span><span id="__span-34-21"><a id="__codelineno-34-21" name="__codelineno-34-21" href="#__codelineno-34-21"></a>
</span><span id="__span-34-22"><a id="__codelineno-34-22" name="__codelineno-34-22" href="#__codelineno-34-22"></a><span class="w">  </span><span class="c1">// Clock init</span>
</span><span id="__span-34-23"><a id="__codelineno-34-23" name="__codelineno-34-23" href="#__codelineno-34-23"></a><span class="w">  </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ps7_config</span><span class="w"> </span><span class="p">(</span><span class="n">ps7_clock_init_data</span><span class="p">);</span>
</span><span id="__span-34-24"><a id="__codelineno-34-24" name="__codelineno-34-24" href="#__codelineno-34-24"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">PS7_INIT_SUCCESS</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
</span><span id="__span-34-25"><a id="__codelineno-34-25" name="__codelineno-34-25" href="#__codelineno-34-25"></a>
</span><span id="__span-34-26"><a id="__codelineno-34-26" name="__codelineno-34-26" href="#__codelineno-34-26"></a><span class="w">  </span><span class="c1">// DDR init</span>
</span><span id="__span-34-27"><a id="__codelineno-34-27" name="__codelineno-34-27" href="#__codelineno-34-27"></a><span class="w">  </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ps7_config</span><span class="w"> </span><span class="p">(</span><span class="n">ps7_ddr_init_data</span><span class="p">);</span>
</span><span id="__span-34-28"><a id="__codelineno-34-28" name="__codelineno-34-28" href="#__codelineno-34-28"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">PS7_INIT_SUCCESS</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
</span><span id="__span-34-29"><a id="__codelineno-34-29" name="__codelineno-34-29" href="#__codelineno-34-29"></a>
</span><span id="__span-34-30"><a id="__codelineno-34-30" name="__codelineno-34-30" href="#__codelineno-34-30"></a><span class="w">  </span><span class="c1">// Peripherals init</span>
</span><span id="__span-34-31"><a id="__codelineno-34-31" name="__codelineno-34-31" href="#__codelineno-34-31"></a><span class="w">  </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ps7_config</span><span class="w"> </span><span class="p">(</span><span class="n">ps7_peripherals_init_data</span><span class="p">);</span>
</span><span id="__span-34-32"><a id="__codelineno-34-32" name="__codelineno-34-32" href="#__codelineno-34-32"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">PS7_INIT_SUCCESS</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
</span><span id="__span-34-33"><a id="__codelineno-34-33" name="__codelineno-34-33" href="#__codelineno-34-33"></a><span class="w">  </span><span class="c1">//xil_printf (&quot;\n PCW Silicon Version : %d.0&quot;, pcw_ver);</span>
</span><span id="__span-34-34"><a id="__codelineno-34-34" name="__codelineno-34-34" href="#__codelineno-34-34"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">PS7_INIT_SUCCESS</span><span class="p">;</span>
</span><span id="__span-34-35"><a id="__codelineno-34-35" name="__codelineno-34-35" href="#__codelineno-34-35"></a><span class="p">}</span>
</span></code></pre></div>
–ò–∑ –∫–æ–¥–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–∏–¥–Ω–æ, —á—Ç–æ —Å–Ω–∞—á–∞–ª–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä—ã <code>MIO</code>, –∑–∞—Ç–µ–º <code>PLL</code>, –¥–µ—Ä–µ–≤–æ —Ç–∞–∫—Ç–æ–≤—ã—Ö —á–∞—Å—Ç–æ—Ç, <code>DDR</code>, –ø–µ—Ä–∏—Ñ–µ—Ä–∏–π–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤. –°–∞–º –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–≥–∏—Å—Ç—Ä—ã –≤–æ –≤—Å–µ—Ö —Å–ª—É—á–∞—è—Ö –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ <code>ps7_config()</code>. –§—Ä–∞–≥–º–µ–Ω—Ç —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π:</p>
<p><div class="language-C highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="w">     </span><span class="p">...</span><span class="w">   </span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="w">     </span><span class="p">...</span><span class="w">   </span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="w">     </span><span class="p">...</span><span class="w">   </span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="w">     </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">opcode</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">OPCODE_EXIT</span><span class="p">:</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="w">            </span><span class="n">finish</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PS7_INIT_SUCCESS</span><span class="p">;</span>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">OPCODE_CLEAR</span><span class="p">:</span>
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a><span class="w">            </span><span class="n">addr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a><span class="w">            </span><span class="o">*</span><span class="n">addr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-35-14"><a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a>
</span><span id="__span-35-15"><a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">OPCODE_WRITE</span><span class="p">:</span>
</span><span id="__span-35-16"><a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a><span class="w">            </span><span class="n">addr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span><span id="__span-35-17"><a id="__codelineno-35-17" name="__codelineno-35-17" href="#__codelineno-35-17"></a><span class="w">            </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span><span id="__span-35-18"><a id="__codelineno-35-18" name="__codelineno-35-18" href="#__codelineno-35-18"></a><span class="w">            </span><span class="o">*</span><span class="n">addr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
</span><span id="__span-35-19"><a id="__codelineno-35-19" name="__codelineno-35-19" href="#__codelineno-35-19"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-35-20"><a id="__codelineno-35-20" name="__codelineno-35-20" href="#__codelineno-35-20"></a>
</span><span id="__span-35-21"><a id="__codelineno-35-21" name="__codelineno-35-21" href="#__codelineno-35-21"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">OPCODE_MASKWRITE</span><span class="p">:</span>
</span><span id="__span-35-22"><a id="__codelineno-35-22" name="__codelineno-35-22" href="#__codelineno-35-22"></a><span class="w">            </span><span class="n">addr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span><span id="__span-35-23"><a id="__codelineno-35-23" name="__codelineno-35-23" href="#__codelineno-35-23"></a><span class="w">            </span><span class="n">mask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span><span id="__span-35-24"><a id="__codelineno-35-24" name="__codelineno-35-24" href="#__codelineno-35-24"></a><span class="w">            </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
</span><span id="__span-35-25"><a id="__codelineno-35-25" name="__codelineno-35-25" href="#__codelineno-35-25"></a><span class="w">            </span><span class="o">*</span><span class="n">addr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">mask</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">*</span><span class="n">addr</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">mask</span><span class="p">);</span>
</span><span id="__span-35-26"><a id="__codelineno-35-26" name="__codelineno-35-26" href="#__codelineno-35-26"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-35-27"><a id="__codelineno-35-27" name="__codelineno-35-27" href="#__codelineno-35-27"></a>
</span><span id="__span-35-28"><a id="__codelineno-35-28" name="__codelineno-35-28" href="#__codelineno-35-28"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">OPCODE_MASKPOLL</span><span class="p">:</span>
</span><span id="__span-35-29"><a id="__codelineno-35-29" name="__codelineno-35-29" href="#__codelineno-35-29"></a><span class="w">            </span><span class="n">addr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span><span id="__span-35-30"><a id="__codelineno-35-30" name="__codelineno-35-30" href="#__codelineno-35-30"></a><span class="w">            </span><span class="n">mask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span><span id="__span-35-31"><a id="__codelineno-35-31" name="__codelineno-35-31" href="#__codelineno-35-31"></a><span class="w">            </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-35-32"><a id="__codelineno-35-32" name="__codelineno-35-32" href="#__codelineno-35-32"></a><span class="w">            </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="o">*</span><span class="n">addr</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">mask</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-35-33"><a id="__codelineno-35-33" name="__codelineno-35-33" href="#__codelineno-35-33"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">PS7_MASK_POLL_TIME</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-35-34"><a id="__codelineno-35-34" name="__codelineno-35-34" href="#__codelineno-35-34"></a><span class="w">                    </span><span class="n">finish</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PS7_INIT_TIMEOUT</span><span class="p">;</span>
</span><span id="__span-35-35"><a id="__codelineno-35-35" name="__codelineno-35-35" href="#__codelineno-35-35"></a><span class="w">                    </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-35-36"><a id="__codelineno-35-36" name="__codelineno-35-36" href="#__codelineno-35-36"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-35-37"><a id="__codelineno-35-37" name="__codelineno-35-37" href="#__codelineno-35-37"></a><span class="w">                </span><span class="n">i</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-35-38"><a id="__codelineno-35-38" name="__codelineno-35-38" href="#__codelineno-35-38"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-35-39"><a id="__codelineno-35-39" name="__codelineno-35-39" href="#__codelineno-35-39"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-35-40"><a id="__codelineno-35-40" name="__codelineno-35-40" href="#__codelineno-35-40"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">OPCODE_MASKDELAY</span><span class="p">:</span>
</span><span id="__span-35-41"><a id="__codelineno-35-41" name="__codelineno-35-41" href="#__codelineno-35-41"></a><span class="w">            </span><span class="n">addr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span><span id="__span-35-42"><a id="__codelineno-35-42" name="__codelineno-35-42" href="#__codelineno-35-42"></a><span class="w">            </span><span class="n">mask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span><span id="__span-35-43"><a id="__codelineno-35-43" name="__codelineno-35-43" href="#__codelineno-35-43"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">delay</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_number_of_cycles_for_delay</span><span class="p">(</span><span class="n">mask</span><span class="p">);</span>
</span><span id="__span-35-44"><a id="__codelineno-35-44" name="__codelineno-35-44" href="#__codelineno-35-44"></a><span class="w">            </span><span class="n">perf_reset_and_start_timer</span><span class="p">();</span><span class="w"> </span>
</span><span id="__span-35-45"><a id="__codelineno-35-45" name="__codelineno-35-45" href="#__codelineno-35-45"></a><span class="w">            </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="o">*</span><span class="n">addr</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">delay</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-35-46"><a id="__codelineno-35-46" name="__codelineno-35-46" href="#__codelineno-35-46"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-35-47"><a id="__codelineno-35-47" name="__codelineno-35-47" href="#__codelineno-35-47"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-35-48"><a id="__codelineno-35-48" name="__codelineno-35-48" href="#__codelineno-35-48"></a><span class="w">        </span><span class="k">default</span><span class="o">:</span>
</span><span id="__span-35-49"><a id="__codelineno-35-49" name="__codelineno-35-49" href="#__codelineno-35-49"></a><span class="w">            </span><span class="n">finish</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PS7_INIT_CORRUPT</span><span class="p">;</span>
</span><span id="__span-35-50"><a id="__codelineno-35-50" name="__codelineno-35-50" href="#__codelineno-35-50"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-35-51"><a id="__codelineno-35-51" name="__codelineno-35-51" href="#__codelineno-35-51"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-35-52"><a id="__codelineno-35-52" name="__codelineno-35-52" href="#__codelineno-35-52"></a><span class="w">     </span><span class="p">...</span><span class="w">   </span>
</span><span id="__span-35-53"><a id="__codelineno-35-53" name="__codelineno-35-53" href="#__codelineno-35-53"></a><span class="w">     </span><span class="p">...</span><span class="w">   </span>
</span><span id="__span-35-54"><a id="__codelineno-35-54" name="__codelineno-35-54" href="#__codelineno-35-54"></a><span class="w">     </span><span class="p">...</span><span class="w">   </span>
</span></code></pre></div>
–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å –æ–ø–∫–æ–¥–æ–º <code>OPCODE_EXIT</code> –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π. –¢–∞–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ –∫–æ–Ω–µ—Ü –º–∞—Å—Å–∏–≤–∞.</p>
<p>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å –æ–ø–∫–æ–¥–æ–º <code>OPCODE_CLEAR</code> –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤ —Ä–µ–≥–∏—Å—Ç—Ä –ø–æ –∞–¥—Ä–µ—Å—É –∑–Ω–∞—á–µ–Ω–∏–µ <code>0</code>.</p>
<p>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å –æ–ø–∫–æ–¥–æ–º <code>OPCODE_WRITE</code> –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤ —Ä–µ–≥–∏—Å—Ç—Ä –ø–æ –∞–¥—Ä–µ—Å—É –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞, –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ –≤—Å–ª–µ–¥ –∑–∞ –æ–ø–∫–æ–¥–æ–º.</p>
<p>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å –æ–ø–∫–æ–¥–æ–º <code>OPCODE_MASK_WRITE</code> –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤ —Ä–µ–≥–∏—Å—Ç—Ä –ø–æ –∞–¥—Ä–µ—Å—É –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –º–∞—Å–∫–æ–π: –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ –±–∏—Ç—ã –∑–Ω–∞—á–µ–Ω–∏—è, –≤ –ø–æ–∑–∏—Ü–∏–∏ –∫–æ—Ç–æ—Ä—ã—Ö –≤ –∑–Ω–∞—á–µ–Ω–∏–∏ –º–∞—Å–∫–∏ —Å—Ç–æ—è—Ç <code>1</code>.</p>
<p>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å –æ–ø–∫–æ–¥–æ–º <code>OPCODE_MASKPOLL</code> –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è: –≤ —Ü–∏–∫–ª–µ —á–∏—Ç–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞ –ø–æ –∞–¥—Ä–µ—Å—É, –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç –Ω–∞ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –º–∞—Å–∫—É –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞ –Ω–æ–ª—å. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å –º–∞—Å–∫–æ–π –¥–∞–¥—É—Ç –Ω–æ–ª—å, –æ–ø—Ä–æ—Å –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç—Å—è. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–∏–∫–ª–æ–≤ –≤ –æ–ø—Ä–æ—Å–µ –∑–∞–¥–∞—ë—Ç—Å—è –º–∞–∫—Ä–æ—Å–æ–º <code>PS7_MASK_POLL_TIME</code> –∏ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç <code>100000000</code>. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å–ª—É–∂–∏—Ç –¥–ª—è –æ–ø—Ä–æ—Å–∞ –∑–Ω–∞—á–µ–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ —Å —Ü–µ–ª—å—é –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —É—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è –ª–∏ —Ç–æ—Ç –∏–ª–∏ –∏–Ω–æ–π –±–∏—Ç, —Ñ–ª–∞–≥ –∏ –ø–æ–ª–µ.</p>
<p>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å –æ–ø–∫–æ–¥–æ–º <code>OPCODE_MASKDELAY</code> –ø—Ä–æ—Å—Ç–æ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ—Ç–æ—Ä–æ–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏. –ó–∞–¥–µ—Ä–∂–∫–∞ –∑–∞–¥–∞—ë—Ç—Å—è –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö. –ó–∞–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –ø—É—Ç—ë–º —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è —Å—á—ë—Ç–Ω–æ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞ —Å –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —É–∫–∞–∑–∞–Ω–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–µ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö. –¢–∞–π–º–µ—Ä –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –µ–≥–æ —Å—á—ë—Ç–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä –æ–±–Ω—É–ª—è–µ—Ç—Å—è, –∑–∞—Ç–µ–º —Ç–∞–π–º–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –æ–ø—Ä–æ—Å —Å—á—ë—Ç–Ω–æ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Ç–∞–π–º–µ—Ä–∞ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ø–æ—Ä–æ–≥–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –ø–æ—Å–ª–µ —á–µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —ç—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–µ—Ä–∂–µ–∫ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.</p>
<p>–û–±—ã—á–Ω–æ–µ –¥–ª—è —ç—Ç–æ–≥–æ –º–µ—Å—Ç–∞ –¥–µ–π—Å—Ç–≤–∏–µ&nbsp;‚Äì –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç–µ–∫–∞ –Ω–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è, —Ç.–∫. —É–∫–∞–∑–∞—Ç–µ–ª–∏ —Å—Ç–µ–∫–æ–≤ (–¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞) –ø—Ä–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Ä–∞–Ω–µ–µ.</p>
<p>–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ <code>main</code>.</p>
<h2 id="main">–§—É–Ω–∫—Ü–∏—è main<a class="headerlink" href="#main" title="Permanent link">üîó</a></h2>
<p>–§—É–Ω–∫—Ü–∏—è <code>main</code> –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã, –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –∫–æ—Ç–æ—Ä—ã—Ö –ø–µ—Ä–µ–¥–∞—ë—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç—Ç–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ.</p>
<p>–ö–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏ <code>main</code> (–∏ —Ñ—É–Ω–∫—Ü–∏–∏ <code>load_img</code>, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏–∑ —Ñ–ª–µ—à—å –ø–∞–º—è—Ç–∏ –≤ <strong>OCM</strong>) —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –≤ <strong>DDR</strong> –ø–∞–º—è—Ç–∏. –≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –∏–∑-–∑–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —Å–µ–≥–º–µ–Ω—Ç–æ–≤ <strong>OCM</strong> (—Ç—Ä–∏ —Å–µ–≥–º–µ–Ω—Ç–∞ <strong>OCM</strong> –ø–µ—Ä–µ–º–µ—â–∞—é—Ç—Å—è —Å –∞–¥—Ä–µ—Å–∞ <code>0x00000000</code> –≤ –∞–¥—Ä–µ—Å <code>0xfffc0000</code>, –æ–±—Ä–∞–∑—É—è —Å —á–µ—Ç–≤—ë—Ä—Ç—ã–º —Å–µ–≥–º–µ–Ω—Ç–æ–º, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã–º –ø–æ –∞–¥—Ä–µ—Å—É <code>0xffff0000</code> –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—É—é –æ–±–ª–∞—Å—Ç—å –ø–∞–º—è—Ç–∏ —Ä–∞–∑–º–µ—Ä–æ–º 256 –∫–±–∞–π—Ç)&nbsp;‚Äì —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –∫–æ–¥ –∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –º–æ–≥—É—Ç —Ä–∞–∑–º–µ—â–∞—Ç—å—Å—è –≤ –ø–µ—Ä–µ–º–µ—â–∞–µ–º—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–∞—Ö, –ø–æ—ç—Ç–æ–º—É –æ–Ω–∏ –ø–æ–º–µ—â–µ–Ω—ã –≤ <strong>DDR</strong> –ø–∞–º—è—Ç—å.</p>
<p>–ü–µ—Ä–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ: –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ <strong>MMU</strong> –≤ —Å—Ç–∞—Ä—à–∏–µ –∞–¥—Ä–µ—Å–∞ <strong>OCM</strong>&nbsp;‚Äì —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–¥–µ–ª–∞—Ç—å, —Ç.–∫. –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –≤—Å–µ —Å–µ–≥–º–µ–Ω—Ç—ã <strong>OCM</strong> –±—É–¥—É—Ç –ø–µ—Ä–µ–º–µ—â–µ–Ω—ã –≤ —Å—Ç–∞—Ä—à–∏–µ –∞–¥—Ä–µ—Å–∞ –ø–∞–º—è—Ç–∏, –∏ —Ç–µ–∫—É—â–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ –æ–∫–∞–∂–µ—Ç—Å—è –Ω–µ –≤–∞–ª–∏–¥–Ω—ã–º.</p>
<p>–ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π:</p>
<ul>
<li>–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∞—Å—Å–∏–≤–∞ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –Ω–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π;</li>
<li>—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π;</li>
<li>–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –¥–ª—è –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π –æ—Ç –ø–µ—Ä–∏—Ñ–µ—Ä–∏–π–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤;</li>
<li>—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π.  </li>
</ul>
<p>–í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø–µ—á–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª. –ü–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –ø–µ—Ä–µ–¥–∞—á–∏ –≤—Å–µ—Ö —Å–∏–º–≤–æ–ª–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π (–ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –∂–¥—ë—Ç —ç—Ç–æ–≥–æ&nbsp;‚Äì —ç—Ç–æ –≤–∞–∂–Ω–æ) –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ <strong>OCM</strong> —Å –º–ª–∞–¥—à–∏—Ö –∞–¥—Ä–µ—Å–æ–≤ –≤ —Å—Ç–∞—Ä—à–∏–µ. –î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ –ø—Ä–∏–≤–µ–ª–æ –∫ –æ—à–∏–±–∫–∞–º —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, —á—Ç–æ–±—ã –≤ –ø–µ—Ä–µ–º–µ—â–∞–µ–º—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–∞—Ö –Ω–µ –±—ã–ª–æ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∫–æ–¥–∞. –ü–æ—ç—Ç–æ–º—É —Ñ—É–Ω–∫—Ü–∏—è <code>main</code> (–∏ –¥—Ä—É–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è) –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–∑ DDR –ø–∞–º—è—Ç–∏. –í —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏ —ç—Ç–æ—Ç –∫–æ–¥ —Å—Ä–∞–∑—É –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ DDR –ø–∞–º—è—Ç—å, –ø—Ä–∏ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–π —Ä–∞–±–æ—Ç–µ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è —Å—Ç–∞—Ä—Ç–∞–ø–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ —Ñ—É–Ω–∫—Ü–∏—é <code>main</code>.</p>
<p>–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ SoC –≥–æ—Ç–æ–≤ –∫ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∫–æ—Ç–æ—Ä–∞—è –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø—É—Ç—ë–º –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏ <code>load_img</code>.</p>
<h3 id="_17">–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã<a class="headerlink" href="#_17" title="Permanent link">üîó</a></h3>
<p>–û–±—Ä–∞–∑ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤–æ –≤–Ω–µ—à–Ω–µ–π —Ñ–ª–µ—à—å –ø–∞–º—è—Ç–∏...</p>
<p>...</p>
<p>–ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ –æ—Ç–ª–∞–¥–∫–µ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <a href="../debug/#debug-load">—ç–º—É–ª—è—Ü–∏—é —Ä–∞–±–æ—Ç—ã –∑–∞–≥—Ä—É–∑—á–∏–∫–∞</a>.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>–°–ª–µ–¥—É–µ—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ <strong>MMU</strong> –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –æ–±—Ä–∞–∑–∞ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∞ –ø–æ–º–µ—â–∞–µ—Ç—Å—è –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –∞–¥—Ä–µ—Å—É –ø—É—Ç—ë–º —Ç–∞–±–ª–∏—Ü—ã —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ <strong>MMU</strong> —Å–∞–º–æ–≥–æ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞&nbsp;‚Äì —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ –±–ª–∞–≥–æ–¥–∞—Ä—è —Ç–æ–º—É, —á—Ç–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–∞–±–ª–∏—Ü—ã —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ <strong>MMU</strong> –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ –∏ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏–¥–µ–Ω—Ç–∏—á–Ω—ã.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../impl/" class="btn btn-neutral float-left" title="Implementation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../app/" class="btn btn-neutral float-right" title="Application Program">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../impl/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../app/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/wavedrom/2.6.8/wavedrom.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/wavedrom/2.6.8/skins/default.js"></script>
      <script src="../js/wavedrom_loader.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/wavedrom@2.1.2/wavedrom.unpkg.js"></script>
      <script src="https://wavedrom.com/skins/default.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
</script></body>
</html>
